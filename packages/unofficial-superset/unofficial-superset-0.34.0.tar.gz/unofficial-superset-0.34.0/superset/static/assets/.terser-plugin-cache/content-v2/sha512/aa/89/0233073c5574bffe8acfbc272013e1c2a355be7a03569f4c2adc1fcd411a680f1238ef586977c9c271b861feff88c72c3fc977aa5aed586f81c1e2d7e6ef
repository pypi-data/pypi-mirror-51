{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[33,5],{1101:function(e,t,n){var r;!function(o,a,i){if(o){for(var s,u={8:\"backspace\",9:\"tab\",13:\"enter\",16:\"shift\",17:\"ctrl\",18:\"alt\",20:\"capslock\",27:\"esc\",32:\"space\",33:\"pageup\",34:\"pagedown\",35:\"end\",36:\"home\",37:\"left\",38:\"up\",39:\"right\",40:\"down\",45:\"ins\",46:\"del\",91:\"meta\",93:\"meta\",224:\"meta\"},l={106:\"*\",107:\"+\",109:\"-\",110:\".\",111:\"/\",186:\";\",187:\"=\",188:\",\",189:\"-\",190:\".\",191:\"/\",192:\"`\",219:\"[\",220:\"\\\\\",221:\"]\",222:\"'\"},c={\"~\":\"`\",\"!\":\"1\",\"@\":\"2\",\"#\":\"3\",$:\"4\",\"%\":\"5\",\"^\":\"6\",\"&\":\"7\",\"*\":\"8\",\"(\":\"9\",\")\":\"0\",_:\"-\",\"+\":\"=\",\":\":\";\",'\"':\"'\",\"<\":\",\",\">\":\".\",\"?\":\"/\",\"|\":\"\\\\\"},f={option:\"alt\",command:\"meta\",return:\"enter\",escape:\"esc\",plus:\"+\",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?\"meta\":\"ctrl\"},p=1;p<20;++p)u[111+p]=\"f\"+p;for(p=0;p<=9;++p)u[p+96]=p.toString();v.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},v.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},v.prototype.trigger=function(e,t){return this._directMap[e+\":\"+t]&&this._directMap[e+\":\"+t]({},e),this},v.prototype.reset=function(){return this._callbacks={},this._directMap={},this},v.prototype.stopCallback=function(e,t){return!((\" \"+t.className+\" \").indexOf(\" mousetrap \")>-1)&&(!function e(t,n){return null!==t&&t!==a&&(t===n||e(t.parentNode,n))}(t,this.target)&&(\"INPUT\"==t.tagName||\"SELECT\"==t.tagName||\"TEXTAREA\"==t.tagName||t.isContentEditable))},v.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},v.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(u[t]=e[t]);s=null},v.init=function(){var e=v(a);for(var t in e)\"_\"!==t.charAt(0)&&(v[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},v.init(),o.Mousetrap=v,e.exports&&(e.exports=v),void 0===(r=function(){return v}.call(t,n,t,e))||(e.exports=r)}function y(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent(\"on\"+t,n)}function b(e){if(\"keypress\"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return u[e.which]?u[e.which]:l[e.which]?l[e.which]:String.fromCharCode(e.which).toLowerCase()}function h(e){return\"shift\"==e||\"ctrl\"==e||\"alt\"==e||\"meta\"==e}function d(e,t,n){return n||(n=function(){if(!s)for(var e in s={},u)e>95&&e<112||u.hasOwnProperty(e)&&(s[u[e]]=e);return s}()[e]?\"keydown\":\"keypress\"),\"keypress\"==n&&t.length&&(n=\"keydown\"),n}function m(e,t){var n,r,o,a=[];for(n=function(e){return\"+\"===e?[\"+\"]:(e=e.replace(/\\+{2}/g,\"+plus\")).split(\"+\")}(e),o=0;o<n.length;++o)r=n[o],f[r]&&(r=f[r]),t&&\"keypress\"!=t&&c[r]&&(r=c[r],a.push(\"shift\")),h(r)&&a.push(r);return{key:r,modifiers:a,action:t=d(r,a,t)}}function v(e){var t=this;if(e=e||a,!(t instanceof v))return new v(e);t.target=e,t._callbacks={},t._directMap={};var n,r={},o=!1,i=!1,s=!1;function u(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(s=!1)}function l(e,n,o,a,i,s){var u,l,c,f,p=[],y=o.type;if(!t._callbacks[e])return[];for(\"keyup\"==y&&h(e)&&(n=[e]),u=0;u<t._callbacks[e].length;++u)if(l=t._callbacks[e][u],(a||!l.seq||r[l.seq]==l.level)&&y==l.action&&(\"keypress\"==y&&!o.metaKey&&!o.ctrlKey||(c=n,f=l.modifiers,c.sort().join(\",\")===f.sort().join(\",\")))){var b=!a&&l.combo==i,d=a&&l.seq==a&&l.level==s;(b||d)&&t._callbacks[e].splice(u,1),p.push(l)}return p}function c(e,n,r,o){t.stopCallback(n,n.target||n.srcElement,r,o)||!1===e(n,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function f(e){\"number\"!=typeof e.which&&(e.which=e.keyCode);var n=b(e);n&&(\"keyup\"!=e.type||o!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push(\"shift\"),e.altKey&&t.push(\"alt\"),e.ctrlKey&&t.push(\"ctrl\"),e.metaKey&&t.push(\"meta\"),t}(e),e):o=!1)}function p(e,t,a,i){function l(t){return function(){s=t,++r[e],clearTimeout(n),n=setTimeout(u,1e3)}}function f(t){c(a,t,e),\"keyup\"!==i&&(o=b(t)),setTimeout(u,10)}r[e]=0;for(var p=0;p<t.length;++p){var y=p+1===t.length?f:l(i||m(t[p+1]).action);d(t[p],y,i,e,p)}}function d(e,n,r,o,a){t._directMap[e+\":\"+r]=n;var i,s=(e=e.replace(/\\s+/g,\" \")).split(\" \");s.length>1?p(e,s,n,r):(i=m(e,r),t._callbacks[i.key]=t._callbacks[i.key]||[],l(i.key,i.modifiers,{type:i.action},o,e,a),t._callbacks[i.key][o?\"unshift\":\"push\"]({callback:n,modifiers:i.modifiers,action:i.action,seq:o,level:a,combo:e}))}t._handleKey=function(e,t,n){var r,o=l(e,t,n),a={},f=0,p=!1;for(r=0;r<o.length;++r)o[r].seq&&(f=Math.max(f,o[r].level));for(r=0;r<o.length;++r)if(o[r].seq){if(o[r].level!=f)continue;p=!0,a[o[r].seq]=1,c(o[r].callback,n,o[r].combo,o[r].seq)}else p||c(o[r].callback,n,o[r].combo);var y=\"keypress\"==n.type&&i;n.type!=s||h(e)||y||u(a),i=p&&\"keydown\"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)d(e[r],t,n)},y(e,\"keypress\",f),y(e,\"keydown\",f),y(e,\"keyup\",f)}}(\"undefined\"!=typeof window?window:null,\"undefined\"!=typeof window?document:null)},1102:function(e,t,n){var r={\"./af\":802,\"./af.js\":802,\"./ar\":803,\"./ar-dz\":804,\"./ar-dz.js\":804,\"./ar-kw\":805,\"./ar-kw.js\":805,\"./ar-ly\":806,\"./ar-ly.js\":806,\"./ar-ma\":807,\"./ar-ma.js\":807,\"./ar-sa\":808,\"./ar-sa.js\":808,\"./ar-tn\":809,\"./ar-tn.js\":809,\"./ar.js\":803,\"./az\":810,\"./az.js\":810,\"./be\":811,\"./be.js\":811,\"./bg\":812,\"./bg.js\":812,\"./bm\":813,\"./bm.js\":813,\"./bn\":814,\"./bn.js\":814,\"./bo\":815,\"./bo.js\":815,\"./br\":816,\"./br.js\":816,\"./bs\":817,\"./bs.js\":817,\"./ca\":818,\"./ca.js\":818,\"./cs\":819,\"./cs.js\":819,\"./cv\":820,\"./cv.js\":820,\"./cy\":821,\"./cy.js\":821,\"./da\":822,\"./da.js\":822,\"./de\":823,\"./de-at\":824,\"./de-at.js\":824,\"./de-ch\":825,\"./de-ch.js\":825,\"./de.js\":823,\"./dv\":826,\"./dv.js\":826,\"./el\":827,\"./el.js\":827,\"./en-au\":828,\"./en-au.js\":828,\"./en-ca\":829,\"./en-ca.js\":829,\"./en-gb\":830,\"./en-gb.js\":830,\"./en-ie\":831,\"./en-ie.js\":831,\"./en-il\":832,\"./en-il.js\":832,\"./en-nz\":833,\"./en-nz.js\":833,\"./eo\":834,\"./eo.js\":834,\"./es\":835,\"./es-do\":836,\"./es-do.js\":836,\"./es-us\":837,\"./es-us.js\":837,\"./es.js\":835,\"./et\":838,\"./et.js\":838,\"./eu\":839,\"./eu.js\":839,\"./fa\":840,\"./fa.js\":840,\"./fi\":841,\"./fi.js\":841,\"./fo\":842,\"./fo.js\":842,\"./fr\":843,\"./fr-ca\":844,\"./fr-ca.js\":844,\"./fr-ch\":845,\"./fr-ch.js\":845,\"./fr.js\":843,\"./fy\":846,\"./fy.js\":846,\"./gd\":847,\"./gd.js\":847,\"./gl\":848,\"./gl.js\":848,\"./gom-latn\":849,\"./gom-latn.js\":849,\"./gu\":850,\"./gu.js\":850,\"./he\":851,\"./he.js\":851,\"./hi\":852,\"./hi.js\":852,\"./hr\":853,\"./hr.js\":853,\"./hu\":854,\"./hu.js\":854,\"./hy-am\":855,\"./hy-am.js\":855,\"./id\":856,\"./id.js\":856,\"./is\":857,\"./is.js\":857,\"./it\":858,\"./it.js\":858,\"./ja\":859,\"./ja.js\":859,\"./jv\":860,\"./jv.js\":860,\"./ka\":861,\"./ka.js\":861,\"./kk\":862,\"./kk.js\":862,\"./km\":863,\"./km.js\":863,\"./kn\":864,\"./kn.js\":864,\"./ko\":865,\"./ko.js\":865,\"./ku\":866,\"./ku.js\":866,\"./ky\":867,\"./ky.js\":867,\"./lb\":868,\"./lb.js\":868,\"./lo\":869,\"./lo.js\":869,\"./lt\":870,\"./lt.js\":870,\"./lv\":871,\"./lv.js\":871,\"./me\":872,\"./me.js\":872,\"./mi\":873,\"./mi.js\":873,\"./mk\":874,\"./mk.js\":874,\"./ml\":875,\"./ml.js\":875,\"./mn\":876,\"./mn.js\":876,\"./mr\":877,\"./mr.js\":877,\"./ms\":878,\"./ms-my\":879,\"./ms-my.js\":879,\"./ms.js\":878,\"./mt\":880,\"./mt.js\":880,\"./my\":881,\"./my.js\":881,\"./nb\":882,\"./nb.js\":882,\"./ne\":883,\"./ne.js\":883,\"./nl\":884,\"./nl-be\":885,\"./nl-be.js\":885,\"./nl.js\":884,\"./nn\":886,\"./nn.js\":886,\"./pa-in\":887,\"./pa-in.js\":887,\"./pl\":888,\"./pl.js\":888,\"./pt\":889,\"./pt-br\":890,\"./pt-br.js\":890,\"./pt.js\":889,\"./ro\":891,\"./ro.js\":891,\"./ru\":892,\"./ru.js\":892,\"./sd\":893,\"./sd.js\":893,\"./se\":894,\"./se.js\":894,\"./si\":895,\"./si.js\":895,\"./sk\":896,\"./sk.js\":896,\"./sl\":897,\"./sl.js\":897,\"./sq\":898,\"./sq.js\":898,\"./sr\":899,\"./sr-cyrl\":900,\"./sr-cyrl.js\":900,\"./sr.js\":899,\"./ss\":901,\"./ss.js\":901,\"./sv\":902,\"./sv.js\":902,\"./sw\":903,\"./sw.js\":903,\"./ta\":904,\"./ta.js\":904,\"./te\":905,\"./te.js\":905,\"./tet\":906,\"./tet.js\":906,\"./tg\":907,\"./tg.js\":907,\"./th\":908,\"./th.js\":908,\"./tl-ph\":909,\"./tl-ph.js\":909,\"./tlh\":910,\"./tlh.js\":910,\"./tr\":911,\"./tr.js\":911,\"./tzl\":912,\"./tzl.js\":912,\"./tzm\":913,\"./tzm-latn\":914,\"./tzm-latn.js\":914,\"./tzm.js\":913,\"./ug-cn\":915,\"./ug-cn.js\":915,\"./uk\":916,\"./uk.js\":916,\"./ur\":917,\"./ur.js\":917,\"./uz\":918,\"./uz-latn\":919,\"./uz-latn.js\":919,\"./uz.js\":918,\"./vi\":920,\"./vi.js\":920,\"./x-pseudo\":921,\"./x-pseudo.js\":921,\"./yo\":922,\"./yo.js\":922,\"./zh-cn\":923,\"./zh-cn.js\":923,\"./zh-hk\":924,\"./zh-hk.js\":924,\"./zh-tw\":925,\"./zh-tw.js\":925};function o(e){var t=a(e);return n(t)}function a(e){var t=r[e];if(!(t+1)){var n=new Error(\"Cannot find module '\"+e+\"'\");throw n.code=\"MODULE_NOT_FOUND\",n}return t}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=1102},1299:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return s});var r=n(1),o=n.n(r),a=n(1300),i=n.n(a);n(1426),n(1425);function s(e){return o.a.createElement(\"span\",{className:\"BootstrapSliderWrapper\"},o.a.createElement(i.a,e))}},1425:function(e,t,n){},2118:function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return l}),n.d(t,\"a\",function(){return c}),n.d(t,\"c\",function(){return p});var r=n(1),o=n.n(r),a=n(2383),i=n(19),s=n(2119);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{var r=function(e){var t=i.extent(e,function(e){return e[1]}),n=i.extent(e,function(e){return e[0]});return[[n[0],t[0]],[n[1],t[1]]]}(t);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}({},e,Object(a.a)({height:e.height,width:e.width,padding:n,bounds:r}))}catch(t){return console.error(\"Could not auto zoom\",t),e}}function c(e,t,n){var r,a,i,u=e;if(u.jsTooltip)a=Object(s.a)(u.jsTooltip);else if(u.lineColumn&&u.metric&&[\"geohash\",\"zipcode\"].indexOf(u.lineType)>=0){var l=u.metric.label||u.metric;a=function(e){return o.a.createElement(\"div\",null,o.a.createElement(\"div\",null,u.lineColumn,\": \",o.a.createElement(\"strong\",null,e.object[u.lineColumn])),u.metric&&o.a.createElement(\"div\",null,l,\": \",o.a.createElement(\"strong\",null,e.object[l])))}}return a&&(r=function(e){e.picked?t({content:a(e),x:e.x,y:e.y+30}):t(null)}),u.jsOnclickHref?i=function(e){var t=Object(s.a)(u.jsOnclickHref)(e);window.open(t)}:u.tableFilter&&void 0!==n&&(i=function(e){return n(e.object[u.lineColumn])}),{onClick:i,onHover:r,pickable:Boolean(r)}}var f={p1:.01,p5:.05,p95:.95,p99:.99};function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"sum\",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return\"count\"===t?function(e){return e.length}:(e=t in f?function(e,r){var o;return o=n?e.sort(function(e,t){return i.ascending(n(e),n(t))}):e.sort(i.ascending),i.quantile(o,f[t],r)}:i[t],n?function(t){return e(t.map(n))}:function(t){return e(t)})}},2119:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return f});var r=n(2148),o=n.n(r),a=n(2149),i=n.n(a),s=n(19),u=n(2122);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={console:console,_:i.a,colors:u,d3array:s};function f(e,t,n){var r={},a=\"SAFE_EVAL_\"+Math.floor(1e6*Math.random());r[a]={};var i=a+\"=\"+e,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){l(e,t,n[t])})}return e}({},c,t);Object.keys(s).forEach(function(e){r[e]=s[e]});try{return o.a.runInNewContext(i,r,n),r[a]}catch(e){return function(){return e}}}},2122:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"hexToRGB\",function(){return o});var r=n(29);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;if(!e)return[0,0,0,t];var n=Object(r.f)(e);return[n.r,n.g,n.b,t]}},2126:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return w});var r=n(272),o=n.n(r),a=n(1),i=n.n(a),s=n(0),u=n.n(s),l=n(2143),c=n(2127);n(2144);function f(e){return(f=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){b(e,t,n[t])})}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var g=2e3,j={viewport:u.a.object.isRequired,layers:u.a.array.isRequired,setControlValue:u.a.func,mapStyle:u.a.string,mapboxApiAccessToken:u.a.string.isRequired,onViewportChange:u.a.func},w=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,(n=!(o=d(t).call(this,e))||\"object\"!==f(o)&&\"function\"!=typeof o?v(r):o).tick=n.tick.bind(v(v(n))),n.onViewportChange=n.onViewportChange.bind(v(v(n))),n.state={previousViewport:e.viewport,timer:setInterval(n.tick,g)},n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i.a.Component),n=t,a=[{key:\"getDerivedStateFromProps\",value:function(e,t){return e.viewport!==t.viewport?{viewport:y({},e.viewport),previousViewport:t.viewport}:null}}],(r=[{key:\"componentWillUnmount\",value:function(){clearInterval(this.state.timer)}},{key:\"onViewportChange\",value:function(e){var t=Object.assign({},e),n=y({},this.state.previousViewport,t);this.props.onViewportChange(n)}},{key:\"tick\",value:function(){var e=this;if(this.state&&!o()(this.state.previousViewport,this.props.viewport)){var t=this.props.setControlValue,n=this.props.viewport;t&&t(\"viewport\",n),this.setState(function(){return{previousViewport:e.props.viewport}})}}},{key:\"layers\",value:function(){return this.props.layers.some(function(e){return\"function\"==typeof e})?this.props.layers.map(function(e){return\"function\"==typeof e?e():e}):this.props.layers}},{key:\"render\",value:function(){var e=this.props.viewport;return i.a.createElement(l.b,p({},e,{mapStyle:this.props.mapStyle,onViewportChange:this.onViewportChange,mapboxApiAccessToken:this.props.mapboxApiAccessToken}),i.a.createElement(c.i,p({},e,{layers:this.layers(),initWebGLParameters:!0})))}}])&&h(n.prototype,r),a&&h(n,a),t}();w.propTypes=j,w.defaultProps={mapStyle:\"light\",onViewportChange:function(){},setControlValue:function(){}}},2134:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return u});var r=n(20),o=n.n(r);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}var i=[1,0,1,0,0,0,0];function s(e,t){var n=parseInt(o()(t).format(\"x\"),10);return parseInt(o()(t).add(e).format(\"x\"),10)-n}var u=function(e,t){var n,r,u=o()(Math.min.apply(Math,a(e))),l=o()(Math.max.apply(Math,a(e)));if(-1!==t.indexOf(\"/\")){var c=t.split(\"/\",2);c[0].endsWith(\"Z\")?(r=o()(c[0]),n=o.a.duration(c[1])):(r=o()(c[1]),n=o.a.duration(c[0]))}else r=function(e,t){var n=o()(e).subtract(t),r=e.toArray(),a=n.toArray(),s=r.map(function(e,t){return a[t]!==e}).indexOf(!0),u=r.map(function(e,t){if(t===s){var n=e-a[t];return e-(e-i[t])%n}return t<s||-1===s?e:i[t]});return o()(u)}(u,n=o.a.duration(t));for(var f=o()(r);f<u;)f.add(n);for(;f>u;)f.subtract(n);for(var p=o()(r);p>l;)p.subtract(n);for(;p<l;)p.add(n);var y=null!=t?[f,o()(f).add(n)]:[f,p],b=e.every(function(e){return null===e});return{start:parseInt(f.format(\"x\"),10),end:parseInt(p.format(\"x\"),10),getStep:s.bind(this,n),values:y.map(function(e){return parseInt(e.format(\"x\"),10)}),disabled:b}}},2135:function(e,t,n){\"use strict\";var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(2126),u=n(1101),l=n.n(u),c=n(31),f=n(1299);n(2136);function p(e){return(p=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var m={start:i.a.number.isRequired,step:i.a.number.isRequired,end:i.a.number.isRequired,values:i.a.array.isRequired,onChange:i.a.func,loopDuration:i.a.number,maxFrames:i.a.number,orientation:i.a.oneOf([\"horizontal\",\"vertical\"]),reversed:i.a.bool,disabled:i.a.bool,range:i.a.bool},v=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,(n=!(o=b(t).call(this,e))||\"object\"!==p(o)&&\"function\"!=typeof o?d(r):o).state={intervalId:null};var a=e.end-e.start,i=Math.min(e.maxFrames,a/e.step),s=a/i;return n.intervalMilliseconds=e.loopDuration/i,n.increment=s<e.step?e.step:s-s%e.step,n.onChange=n.onChange.bind(d(d(n))),n.play=n.play.bind(d(d(n))),n.pause=n.pause.bind(d(d(n))),n.stepBackward=n.stepBackward.bind(d(d(n))),n.stepForward=n.stepForward.bind(d(d(n))),n.getPlayClass=n.getPlayClass.bind(d(d(n))),n.formatter=n.formatter.bind(d(d(n))),n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,o.a.PureComponent),n=t,(r=[{key:\"componentDidMount\",value:function(){l.a.bind([\"space\"],this.play)}},{key:\"componentWillUnmount\",value:function(){l.a.unbind([\"space\"])}},{key:\"onChange\",value:function(e){this.props.onChange(e.target.value),null!=this.state.intervalId&&this.pause()}},{key:\"getPlayClass\",value:function(){return null==this.state.intervalId?\"fa fa-play fa-lg slider-button\":\"fa fa-pause fa-lg slider-button\"}},{key:\"play\",value:function(){if(!this.props.disabled)if(null!=this.state.intervalId)this.pause();else{var e=setInterval(this.stepForward,this.intervalMilliseconds);this.setState({intervalId:e})}}},{key:\"pause\",value:function(){clearInterval(this.state.intervalId),this.setState({intervalId:null})}},{key:\"stepForward\",value:function(){var e=this,t=this.props,n=t.start,r=t.end,o=t.step,a=t.values;if(!t.disabled){var i=(Array.isArray(a)?a:[a,a+o]).map(function(t){return t+e.increment}),s=i[1]>r?i[0]-n:0;this.props.onChange(i.map(function(e){return e-s}))}}},{key:\"stepBackward\",value:function(){var e=this,t=this.props,n=t.start,r=t.end,o=t.step,a=t.values;if(!t.disabled){var i=(Array.isArray(a)?a:[a,a+o]).map(function(t){return t-e.increment}),s=i[0]<n?r-i[1]:0;this.props.onChange(i.map(function(e){return e+s}))}}},{key:\"formatter\",value:function(e){if(this.props.disabled)return Object(c.b)(\"Data has no time steps\");var t=e;return Array.isArray(e)?e[0]===e[1]&&(t=[e[0]]):t=[e],t.map(function(e){return new Date(e).toUTCString()}).join(\" : \")}},{key:\"render\",value:function(){var e=this.props,t=e.start,n=e.end,r=e.step,a=e.orientation,i=e.reversed,s=e.disabled,u=e.range,l=e.values;return o.a.createElement(\"div\",{className:\"play-slider\"},o.a.createElement(\"div\",{className:\"play-slider-controls padded\"},o.a.createElement(\"i\",{className:\"fa fa-step-backward fa-lg slider-button \",onClick:this.stepBackward}),o.a.createElement(\"i\",{className:this.getPlayClass(),onClick:this.play}),o.a.createElement(\"i\",{className:\"fa fa-step-forward fa-lg slider-button \",onClick:this.stepForward})),o.a.createElement(\"div\",{className:\"play-slider-scrobbler padded\"},o.a.createElement(f.a,{value:u?l:l[0],range:u,formatter:this.formatter,change:this.onChange,min:t,max:n,step:r,orientation:a,reversed:i,disabled:s?\"disabled\":\"enabled\"})))}}])&&y(n.prototype,r),a&&y(n,a),t}();function g(e){return(g=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){k(e,t,n[t])})}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}v.propTypes=m,v.defaultProps={onChange:function(){},loopDuration:15e3,maxFrames:100,orientation:\"horizontal\",reversed:!1,disabled:!1,range:!0},n.d(t,\"a\",function(){return x});var E={getLayers:i.a.func.isRequired,start:i.a.number.isRequired,end:i.a.number.isRequired,getStep:i.a.func,values:i.a.array.isRequired,aggregation:i.a.bool,disabled:i.a.bool,viewport:i.a.object.isRequired,children:i.a.node,onViewportChange:i.a.func,onValuesChange:i.a.func},x=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,n=!(o=S(t).call(this,e))||\"object\"!==g(o)&&\"function\"!=typeof o?_(r):o;e.getLayers,e.start,e.end,e.getStep,e.values,e.disabled,e.viewport;var a=O(e,[\"getLayers\",\"start\",\"end\",\"getStep\",\"values\",\"disabled\",\"viewport\"]);return n.other=a,n.onViewportChange=n.onViewportChange.bind(_(_(n))),n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o.a.Component),n=t,(r=[{key:\"onViewportChange\",value:function(e){var t=this.props.disabled?w({},e):w({},e,{height:e.height+20});this.props.onViewportChange(t)}},{key:\"render\",value:function(){var e=this.props,t=e.start,n=e.end,r=e.getStep,a=e.disabled,i=e.aggregation,u=e.children,l=e.getLayers,c=e.values,f=e.onValuesChange,p=e.viewport,y=l(c),b=w({},p,{height:a?p.height:p.height-20});return o.a.createElement(\"div\",null,o.a.createElement(s.a,j({},this.other,{viewport:b,layers:y,onViewportChange:this.onViewportChange})),!a&&o.a.createElement(v,{start:t,end:n,step:r(t),values:c,range:!i,onChange:f}),u)}}])&&C(n.prototype,r),a&&C(n,a),t}();x.propTypes=E,x.defaultProps={aggregation:!1,disabled:!1,onViewportChange:function(){},onValuesChange:function(){}}},2136:function(e,t,n){},2139:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return h});var r=n(1),o=n.n(r),a=n(0),i=n.n(a);n(2140);function s(e){return(s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||\"object\"!==s(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b={categories:i.a.object,toggleCategory:i.a.func,showSingleCategory:i.a.func,position:i.a.oneOf([null,\"tl\",\"tr\",\"bl\",\"br\"])},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),f(this,p(t).apply(this,arguments))}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,o.a.PureComponent),n=t,(r=[{key:\"render\",value:function(){var e,t=this;if(0===Object.keys(this.props.categories).length||null===this.props.position)return null;var n=Object.entries(this.props.categories).map(function(e){var n=l(e,2),r=n[0],a=n[1],i={color:\"rgba(\"+a.color.join(\", \")+\")\"},s=a.enabled?\"◼\":\"◻\";return o.a.createElement(\"li\",{key:r},o.a.createElement(\"a\",{href:\"#\",onClick:function(){return t.props.toggleCategory(r)},onDoubleClick:function(){return t.props.showSingleCategory(r)}},o.a.createElement(\"span\",{style:i},s),\" \",r))}),r=\"t\"===this.props.position.charAt(0)?\"top\":\"bottom\",a=\"r\"===this.props.position.charAt(1)?\"right\":\"left\",i=(u(e={position:\"absolute\"},r,\"0px\"),u(e,a,\"10px\"),e);return o.a.createElement(\"div\",{className:\"legend\",style:i},o.a.createElement(\"ul\",{className:\"categories\"},n))}}])&&c(n.prototype,r),a&&c(n,a),t}();h.propTypes=b,h.defaultProps={categories:{},toggleCategory:function(){},showSingleCategory:function(){},position:\"tr\"}},2140:function(e,t,n){},2145:function(e,t){},2146:function(e,t){},2147:function(e,t){},2242:function(e,t,n){\"use strict\";n.r(t);var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(2127),u=n(2135),l=n(2139),c=n(19),f=n(80),p=n(158),y=n(654),b=n(2122);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}var m=10;function v(e,t,n){var r=e.breakPoints,o=e.numBuckets;if(!t)return[];if(void 0===r||0===r.length){var a=o?parseInt(o,10):m,i=d(Object(c.extent)(t,n),2),s=i[0],u=(i[1]-s)/a,l=0===u?0:Math.max(0,Math.ceil(Math.log10(1/u)));return Array(a+1).fill().map(function(e,t){return(s+t*u).toFixed(l)})}return r.sort(function(e,t){return parseFloat(e)-parseFloat(t)})}function g(e,t,n){var r,o,a=e.breakPoints,i=e.numBuckets,s=e.linearColorScheme,u=e.opacity,l=a||i?v({breakPoints:a,numBuckets:i},t,n):null,h=Array.isArray(s)?new p.a({id:\"custom\",colors:s}):Object(y.a)().get(s);if(null!==l){var d=l.length-1,m=d>1?h.getColors(d):[h.colors[h.colors.length-1]],g=m[0],j=m[m.length-1];m.unshift(g),m.push(j);var w=l.map(function(e){return parseFloat(e)});r=Object(f.i)().domain(w).range(m),o=function(e){return e>l[d]||e<l[0]}}else r=h.createLinearScale(Object(c.extent)(t,n)),o=function(){return!1};return function(e){var t=n(e),a=Object(b.hexToRGB)(r(t));return o(t)?a[3]=0:a[3]=u/100*255,a}}var j=n(2118),w=n(2134),k=n(2119);function O(e){return(O=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}n.d(t,\"getLayer\",function(){return A});function A(e,t,n,r,o,a){var i=e,u=i.fillColorPicker,l=i.strokeColorPicker,c=x(t.data.features);if(null!=a&&a.forEach(function(e){c=c.filter(e)}),i.jsDataMutator){var f=Object(k.a)(i.jsDataMutator);c=f(c)}var p=i.metric?i.metric.label||i.metric:null,y=null===i.metric?function(){return[u.r,u.g,u.b,255*u.a]}:g(i,c,function(e){return e[p]}),b=function(e){var t=y(e);return r.length>0&&-1===r.indexOf(e[i.lineColumn])&&(t[3]/=2),t};return new s.f(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){E(e,t,n[t])})}return e}({id:\"path-layer-\".concat(i.sliceId),data:c,pickable:!0,filled:i.filled,stroked:i.stroked,getPolygon:function(e){return e.polygon},getFillColor:b,getLineColor:[l.r,l.g,l.b,255*l.a],getLineWidth:i.lineWidth,extruded:i.extruded,getElevation:function(e){return function(e,t){return 0===t(e)[3]?0:e.elevation}(e,b)},elevationScale:i.multiplier,fp64:!0},Object(j.a)(i,n,o)))}var V={formData:i.a.object.isRequired,payload:i.a.object.isRequired,setControlValue:i.a.func.isRequired,viewport:i.a.object.isRequired,onAddFilter:i.a.func,setTooltip:i.a.func},T=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,(n=!(o=S(t).call(this,e))||\"object\"!==O(o)&&\"function\"!=typeof o?_(r):o).state=t.getDerivedStateFromProps(e),n.getLayers=n.getLayers.bind(_(_(n))),n.onSelect=n.onSelect.bind(_(_(n))),n.onValuesChange=n.onValuesChange.bind(_(_(n))),n.onViewportChange=n.onViewportChange.bind(_(_(n))),n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o.a.Component),n=t,a=[{key:\"getDerivedStateFromProps\",value:function(e,t){if(t&&e.payload.form_data===t.formData)return null;var n=e.payload.data.features||[],r=n.map(function(e){return e.__timestamp}),o=e.payload.form_data.timeGrainSqla||e.payload.form_data.granularity||\"P1D\",a=Object(w.a)(r,o);return{start:a.start,end:a.end,getStep:a.getStep,values:a.values,disabled:a.disabled,viewport:e.formData.autozoom?Object(j.b)(e.viewport,function(e){return e.map(function(e){return e.polygon}).flat()}(n)):e.viewport,selected:[],lastClick:0,formData:e.payload.form_data}}}],(r=[{key:\"onSelect\",value:function(e){var t=this.props,n=t.formData,r=t.onAddFilter,o=new Date,a=o-this.state.lastClick<=250,i=x(this.state.selected);if(a)i.splice(0,i.length,e);else if(n.togglePolygons){var s=i.indexOf(e);-1===s?i.push(e):i.splice(s,1)}else i.splice(0,1,e);this.setState({selected:i,lastClick:o}),n.tableFilter&&r(n.lineColumn,i,!1,!0)}},{key:\"onValuesChange\",value:function(e){this.setState({values:Array.isArray(e)?e:[e,e+this.state.getStep(e)]})}},{key:\"onViewportChange\",value:function(e){this.setState({viewport:e})}},{key:\"getLayers\",value:function(e){if(void 0===this.props.payload.data.features)return[];var t=[];return e[0]===e[1]||e[1]===this.end?t.push(function(t){return t.__timestamp>=e[0]&&t.__timestamp<=e[1]}):t.push(function(t){return t.__timestamp>=e[0]&&t.__timestamp<e[1]}),[A(this.props.formData,this.props.payload,this.props.setTooltip,this.state.selected,this.onSelect,t)]}},{key:\"render\",value:function(){var e=this.props,t=e.payload,n=e.formData,r=e.setControlValue,a=this.state,i=a.start,s=a.end,c=a.getStep,f=a.values,p=a.disabled,y=a.viewport,b=n,d=b.metric?b.metric.label||b.metric:null,m=function(e,t,n){var r=v(e,t,n),o=g(e,t,n),a={};return r.slice(1).forEach(function(t,n){var i=r[n]+\" - \"+r[n+1],s=.5*(parseFloat(r[n])+parseFloat(r[n+1])),u=e.metric?e.metric.label||e.metric:null;a[i]={color:o(h({},u||e.metric,s)),enabled:!0}}),a}(n,t.data.features,function(e){return e[d]});return o.a.createElement(\"div\",{style:{position:\"relative\"}},o.a.createElement(u.a,{getLayers:this.getLayers,start:i,end:s,getStep:c,values:f,onValuesChange:this.onValuesChange,disabled:p,viewport:y,onViewportChange:this.onViewportChange,mapboxApiAccessToken:t.data.mapboxApiKey,mapStyle:n.mapboxStyle,setControlValue:r,aggregation:!0},null!==n.metric&&o.a.createElement(l.a,{categories:m,position:n.legendPosition})))}}])&&C(n.prototype,r),a&&C(n,a),t}();T.propTypes=V,T.defaultProps={onAddFilter:function(){},setTooltip:function(){}};t.default=T}}]);","extractedComments":[]}