{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/Alex/dev/projects/algorithmx/algorithmx-python/js/src/version.ts","webpack:////Users/Alex/dev/projects/algorithmx/algorithmx-python/js/src/index.ts","webpack:////Users/Alex/dev/projects/algorithmx/algorithmx-python/js/src/widget.ts","webpack:///external \"@jupyter-widgets/base\"","webpack:////Users/Alex/dev/projects/algorithmx/algorithmx-python/js/src/buttons.ts","webpack:///external \"algorithmx\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","pkg","version","__export","base_1","version_1","buttonUtils","__importStar","algorithmx","AlgorithmxModel","DOMWidgetModel","[object Object]","assign","super","defaults","_model_name","_model_module","_model_module_version","_view_name","_view_module","_view_module_version","events","show_buttons","serializers","AlgorithmxView","DOMWidgetView","this","client","canvas","eventIndex","stopped","forEach","eventStr","event","JSON","parse","dispatch","model","playEvents","newEvents","slice","length","immediateCanvas","eventQ","duration","cancelall","startall","remove","add","size","zoomkey","setTimeout","svgattr","resetCanvas","element","el","canvasDiv","querySelector","removeChild","buttonDiv","removeCanvas","playAllEvents","stopall","document","createElement","buttonPlay","createButton","setIcon","clickStart","clickStop","buttonRestart","clickRestart","appendChild","setAttribute","subscribe","fullEvent","source","data","fullEventStr","stringify","send","renderButtons","on","eventsChanged","__WEBPACK_EXTERNAL_MODULE__4__","iconName","onclick","button","style","width","height","backgroundColor","display","textAlign","marginRight","cssFloat","onmouseover","cursor","onmousedown","onmouseup","onmouseleave","icon","fontSize","color","lineHeight","__WEBPACK_EXTERNAL_MODULE__6__"],"mappings":"+EACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA0DA,OArDAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,mFClFA,MAAMC,EAAMpC,EAAQ,GAEPE,EAAAmC,QAAUD,EAAIC,QACdnC,EAAAS,KAAOyB,EAAIzB,kJCHxB2B,EAAAtC,EAAA,IACAsC,EAAAtC,EAAA,0oDCDA,MAAAuC,EAAAvC,EAAA,GACAwC,EAAAxC,EAAA,GACAyC,EAAAC,EAAA1C,EAAA,IACA2C,EAAAD,EAAA1C,EAAA,IAEA,MAAa4C,UAAwBL,EAAAM,eACnCC,WACE,OAAAhC,OAAAiC,OAAA,GAAWC,MAAMC,WAAU,CACzBC,YAAa,kBACbC,cAAeX,EAAA7B,KACfyC,sBAAuBZ,EAAAH,QACvBgB,WAAY,iBACZC,aAAcd,EAAA7B,KACd4C,qBAAsBf,EAAAH,QAEtBmB,OAAQ,GACRC,cAAc,KAIXb,EAAAc,YAAW5C,OAAAiC,OAAA,GACbR,EAAAM,eAAea,aAhBtBxD,EAAA0C,kBAoBA1C,EAAAyD,eAAA,cAAoCpB,EAAAqB,cAApCd,kCACUe,KAAAC,OAAmC,KACnCD,KAAAE,OAA4C,KAC5CF,KAAAG,WAAa,EAEbH,KAAAI,SAAU,EAElBnB,WAAWU,GACW,OAAhBK,KAAKC,QACTN,EAAOU,QAAQC,IACb,MAAMC,EAAQC,KAAKC,MAAMH,GACzBN,KAAKC,OAAQS,SAASH,KAI1BtB,gBACE,MAAMU,EAASK,KAAKW,MAAMvD,IAAI,UAC9B4C,KAAKY,WAAWjB,GAGlBV,gBACE,GAAoB,OAAhBe,KAAKC,OAAiB,OAE1B,MAAMN,EAAgCK,KAAKW,MAAMvD,IAAI,UAC/CyD,EAAYlB,EAAOmB,MAAMd,KAAKG,YACpCH,KAAKG,WAAaR,EAAOoB,OAEzBf,KAAKY,WAAWC,GAGlB5B,cACE,GAAoB,OAAhBe,KAAKE,OAAiB,OAC1B,MAAMc,EAAkBhB,KAAKE,OAAOe,OAAO,MAAMC,SAAS,GAC1DF,EAAgBG,YAAYC,WAC5BJ,EAAgBK,SAChBL,EAAgBM,MAAMC,KAAK,CAAC,IAAK,MAAMC,SAAQ,GAC/CC,WAAW,KAAQT,EAAgBU,QAAQ,QAAS,SAAW,GAGjEzC,eACEe,KAAK2B,cAEL,MAAMC,EAAmB5B,KAAK6B,GACxBC,EAAYF,EAAQG,cAAc,wBACtB,OAAdD,GAAoBF,EAAQI,YAAYF,GAE5C,MAAMG,EAAYL,EAAQG,cAAc,sBACtB,OAAdE,GAAoBL,EAAQI,YAAYC,GAG9ChD,SACEe,KAAKkC,eACL/C,MAAMkC,SAGRpC,eACsB,OAAhBe,KAAKE,SAETF,KAAK2B,cACL3B,KAAKmC,gBACLnC,KAAKI,SAAU,GAGjBnB,aACsB,OAAhBe,KAAKE,SACTF,KAAKE,OAAOe,OAAO,MAAMG,WACzBpB,KAAKI,SAAU,GAGjBnB,YACsB,OAAhBe,KAAKE,SACTF,KAAKE,OAAOe,OAAO,MAAMmB,UACzBpC,KAAKI,SAAU,GAGjBnB,gBACE,MAAM2C,EAAmB5B,KAAK6B,GAExBI,EAAYI,SAASC,cAAc,OAEnCC,EAAa3D,EAAY4D,aAAa,QAAS,KAC/CxC,KAAKI,SACPxB,EAAY6D,QAAQF,EAAY,SAChCvC,KAAK0C,eAEL9D,EAAY6D,QAAQF,EAAY,QAChCvC,KAAK2C,eAIHC,EAAgBhE,EAAY4D,aAAa,SAAU,KACvD5D,EAAY6D,QAAQF,EAAY,SAChCvC,KAAK6C,iBAGPZ,EAAUa,YAAYP,GACtBN,EAAUa,YAAYF,GAEtBhB,EAAQkB,YAAYb,GAGtBhD,SACEe,KAAKkC,eAEL,MAAMJ,EAAYO,SAASC,cAAc,OACzCR,EAAUiB,aAAa,KAAM,wBAE7B/C,KAAKC,OAASnB,EAAWmB,OAAO6B,GAEhC9B,KAAKC,OAAO+C,UAAUzC,IACpB,MAAM0C,EAAY,CAAEC,OAAQ,aAAcC,KAAM5C,GAC1C6C,EAAe5C,KAAK6C,UAAUJ,GACpCjD,KAAKsD,KAAKF,KAGZpD,KAAKE,OAASF,KAAKC,OAAOC,SAC1BF,KAAK2B,cAEoB3B,KAAK6B,GACtBiB,YAAYhB,GAEA9B,KAAKW,MAAMvD,IAAI,iBAClB4C,KAAKuD,gBAEtBvD,KAAKW,MAAM6C,GAAG,gBAAiBxD,KAAKyD,cAAezD,MACnDA,KAAKyD,iCCtJTnH,EAAAD,QAAAqH,iFCMarH,EAAAmG,aAAe,EAACmB,EAAkBC,KAC7C,MAAMC,EAASxB,SAASC,cAAc,OACtCjG,EAAAmG,aACAqB,EAAOD,QAAUA,EAEjBC,EAAOC,MAAMC,MAAQ,OACrBF,EAAOC,MAAME,OAAS,OACtBH,EAAOC,MAAMG,gBAbM,qBAcnBJ,EAAOC,MAAMI,QAAU,eACvBL,EAAOC,MAAMK,UAAY,SACzBN,EAAOC,MAAMM,YAAc,MAC3BP,EAAOC,MAAMO,SAAW,OAExBR,EAAOS,YAAc,MACnBT,EAAOC,MAAMG,gBAnBG,qBAoBhBJ,EAAOC,MAAMS,OAAS,YAExBV,EAAOW,YAAc,MAAQX,EAAOC,MAAMG,gBArBxB,uBAsBlBJ,EAAOY,UAAY,MAAQZ,EAAOC,MAAMG,gBAvBtB,uBAwBlBJ,EAAOa,aAAe,MACpBb,EAAOC,MAAMG,gBA1BI,qBA2BjBJ,EAAOC,MAAMS,OAAS,OAGxB,MAAMI,EAAOtC,SAASC,cAAc,KAQpC,OAPAqC,EAAK5B,aAAa,cAAeY,QACjCgB,EAAKb,MAAMc,SAAW,OACtBD,EAAKb,MAAMe,MAAQ,kBACnBF,EAAKb,MAAMgB,WAAa,OAExBjB,EAAOf,YAAY6B,GAEZd,IAGIxH,EAAAoG,QAAU,EAACoB,EAAiBF,KACvC,MAAMgB,EAAOd,EAAO9B,cAAc,KACrB,OAAT4C,GAAeA,EAAK5B,aAAa,cAAeY,yBC3CtDrH,EAAAD,QAAA0I","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","const pkg = require('../package.json')\n\nexport const version = pkg.version\nexport const name = pkg.name\n","export * from './version'\nexport * from './widget'\n","import { DOMWidgetModel, DOMWidgetView, ISerializers } from '@jupyter-widgets/base'\nimport { version, name } from './version'\nimport * as buttonUtils from './buttons'\nimport * as algorithmx from 'algorithmx'\n\nexport class AlgorithmxModel extends DOMWidgetModel {\n  defaults() {\n    return {...super.defaults(),\n      _model_name: 'AlgorithmxModel',\n      _model_module: name,\n      _model_module_version: version,\n      _view_name: 'AlgorithmxView',\n      _view_module: name,\n      _view_module_version: version,\n\n      events: [],\n      show_buttons: false\n    }\n  }\n\n  static serializers: ISerializers = {\n    ...DOMWidgetModel.serializers,\n  }\n}\n\nexport class AlgorithmxView extends DOMWidgetView {\n  private client: algorithmx.Client | null = null\n  private canvas: algorithmx.CanvasSelection | null = null\n  private eventIndex = 0\n\n  private stopped = false\n\n  playEvents(events: ReadonlyArray<string>) {\n    if (this.client === null) return\n    events.forEach(eventStr => {\n      const event = JSON.parse(eventStr) as algorithmx.DispatchEvent\n      this.client!.dispatch(event)\n    })\n  }\n\n  playAllEvents() {\n    const events = this.model.get('events')\n    this.playEvents(events)\n  }\n\n  eventsChanged() {\n    if (this.client === null) return\n\n    const events: ReadonlyArray<string> = this.model.get('events')\n    const newEvents = events.slice(this.eventIndex)\n    this.eventIndex = events.length\n\n    this.playEvents(newEvents)\n  }\n\n  resetCanvas() {\n    if (this.canvas === null) return\n    const immediateCanvas = this.canvas.eventQ(null).duration(0)\n    immediateCanvas.cancelall().startall()\n    immediateCanvas.remove()\n    immediateCanvas.add().size([400, 250]).zoomkey(true)\n    setTimeout(() => { immediateCanvas.svgattr('width', '100%') }, 1)\n  }\n\n  removeCanvas() {\n    this.resetCanvas()\n\n    const element: Element = this.el\n    const canvasDiv = element.querySelector('algorithmx-container')\n    if (canvasDiv !== null) element.removeChild(canvasDiv)\n\n    const buttonDiv = element.querySelector('algorithmx-buttons')\n    if (buttonDiv !== null) element.removeChild(buttonDiv)\n  }\n\n  remove() {\n    this.removeCanvas()\n    super.remove()\n  }\n\n  clickRestart() {\n    if (this.canvas === null) return\n\n    this.resetCanvas()\n    this.playAllEvents()\n    this.stopped = false\n  }\n\n  clickStart () {\n    if (this.canvas === null) return\n    this.canvas.eventQ(null).startall()\n    this.stopped = false\n  }\n\n  clickStop () {\n    if (this.canvas === null) return\n    this.canvas.eventQ(null).stopall()\n    this.stopped = true\n  }\n\n  renderButtons() {\n    const element: Element = this.el\n\n    const buttonDiv = document.createElement('div')\n\n    const buttonPlay = buttonUtils.createButton('pause', () => {\n      if (this.stopped) {\n        buttonUtils.setIcon(buttonPlay, 'pause')\n        this.clickStart()\n      } else {\n        buttonUtils.setIcon(buttonPlay, 'play')\n        this.clickStop()\n      }\n    })\n\n    const buttonRestart = buttonUtils.createButton('repeat', () => {\n      buttonUtils.setIcon(buttonPlay, 'pause')\n      this.clickRestart()\n    })\n\n    buttonDiv.appendChild(buttonPlay)\n    buttonDiv.appendChild(buttonRestart)\n\n    element.appendChild(buttonDiv)\n  }\n\n  render() {\n    this.removeCanvas()\n\n    const canvasDiv = document.createElement('div')\n    canvasDiv.setAttribute('id', 'algorithmx-container')\n\n    this.client = algorithmx.client(canvasDiv)\n\n    this.client.subscribe(event => {\n      const fullEvent = { source: 'algorithmx', data: event }\n      const fullEventStr = JSON.stringify(fullEvent)\n      this.send(fullEventStr)\n    })\n\n    this.canvas = this.client.canvas()\n    this.resetCanvas()\n\n    const element: Element = this.el\n    element.appendChild(canvasDiv)\n\n    const showButtons = this.model.get('show_buttons')\n    if (showButtons) this.renderButtons()\n\n    this.model.on('change:events', this.eventsChanged, this)\n    this.eventsChanged()\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","const BUTTON_COLOR = 'rgb(238, 238, 238)'\nconst HOVER_COLOR = 'rgb(220, 220, 220)'\nconst CLICK_COLOR = 'rgb(200, 200, 200)'\n\nconst SIZE = 28\n\nexport const createButton = (iconName: string, onclick: () => void): HTMLDivElement => {\n  const button = document.createElement('div')\n  createButton\n  button.onclick = onclick\n\n  button.style.width = `${SIZE}px`\n  button.style.height = `${SIZE}px`\n  button.style.backgroundColor = BUTTON_COLOR\n  button.style.display = 'inline-block'\n  button.style.textAlign = 'center'\n  button.style.marginRight = '6px'\n  button.style.cssFloat = 'left'\n\n  button.onmouseover = () => {\n    button.style.backgroundColor = HOVER_COLOR\n    button.style.cursor = 'pointer'\n  }\n  button.onmousedown = () => { button.style.backgroundColor = CLICK_COLOR }\n  button.onmouseup = () => { button.style.backgroundColor = HOVER_COLOR }\n  button.onmouseleave = () => {\n    button.style.backgroundColor = BUTTON_COLOR\n    button.style.cursor = null\n  }\n\n  const icon = document.createElement('i')\n  icon.setAttribute('class', `fa-${iconName} fa`)\n  icon.style.fontSize = '12px'\n  icon.style.color = 'rgb(50, 50, 50)'\n  icon.style.lineHeight = `${SIZE}px`\n\n  button.appendChild(icon)\n\n  return button\n}\n\nexport const setIcon = (button: Element, iconName: string): void => {\n  const icon = button.querySelector('i')\n  if (icon !== null) icon.setAttribute('class', `fa-${iconName} fa`)\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;"],"sourceRoot":""}