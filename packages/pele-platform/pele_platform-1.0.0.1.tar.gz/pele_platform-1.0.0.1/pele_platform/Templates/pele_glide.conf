{
	"licenseDirectoryPath": "$LICENSES", 
	"Initialization" : {
		"allowMissingTerminals": true,
		 "ForceField" : "OPLS2005",
                 "MultipleComplex" : [ $COMPLEXES ],
		 "Solvent" : {
			"ionicStrength" : 0.15,
			"solventType" : "VDGBNP",
			"useDebyeLength" : true } 
	},
	"commands" : [{
		"commandType" : "peleSimulation", 
		"RandomGenerator" : { "seed" : $SEED }, 
		"selectionToPerturb" : { "chains" : { "names" : [ "$CHAIN" ] } }, 
		"PELE_Output" : { 
			"savingFrequencyForAcceptedSteps" : 1, 
			"savingMode" : "savingTrajectory", 
			"reportPath" : "$OUTPUT_PATH/report",
			"trajectoryPath" : "$OUTPUT_PATH/trajectory.xtc"
		},
		"PELE_Parameters" : { 
			"anmFrequency" : 4, 
			"sideChainPredictionFrequency" : 1, 
			"minimizationFrequency" : 1, 
			"sideChainPredictionRegionRadius" : 4, 
			"perturbationCOMConstraintConstant" : 0.5, 
			"activateProximityDetection": true, 
			"temperature": 1500, 
            "numberOfPeleSteps": $PELE_STEPS 
		},

        $CONSTRAINTS

		"Perturbation": { 
			"Box" : { 
				"radius" : 4, 
				"fixedCenter": $BOX_CENTER, 
				"type" : "sphericalBox" 
			},
			"perturbationType":"naive",
			"translationDirection": "steered", 
			"rotationAngles": "nonCoupled", 
			"parameters": { 
				"numberOfStericTrials": 100, 
				"overlapFactor": 0.50 
			} 
		},
		"ANM" : { 
			"algorithm" : "ALPHACARBONS",
			"ANMMinimizer" : { 
				"algorithm" : "TruncatedNewton", 
				"parameters" : { 
					"MaximumMinimizationIterations" : 1, 
					"MaximumNewtonIterations" : 20, 
					"MinimumRMS" : 0.25, 
					"alphaUpdated" : false, 
					"nonBondingListUpdatedEachMinStep" : false 
				} 
			},
			"options" : { 
				"directionGeneration" : "random", 
				"modesMixingOption" : "mixMainModeWithOthersModes", 
				"pickingCase" : "RANDOM_MODE" 
			}, 
			"parameters" : { 
				"displacementFactor" : 0.75, 
				"eigenUpdateFrequency" : 1000000, 
				"mainModeWeightForMixModes" : 0.75, 
				"modesChangeFrequency" : 3, 
				"numberOfModes": 6 
			} 
		}, 
		"SideChainPrediction" : { 
			"algorithm" : "zhexin", 
			"parameters" : { 
				"discardHighEnergySolutions" : false, 
				"resolution": 10, 
				"randomize" : false, 
				"numberOfIterations": 1 
			} 
		}, 
		"Minimizer" : { 
			"algorithm" : "TruncatedNewton", 
			"parameters" : { 
				"MinimumRMS" : 0.25, 
				"alphaUpdated" : false, 
				"nonBondingListUpdatedEachMinStep" : true 
			} 
		}, 
		"PeleTasks" : [{ 
			"metrics" : [

                $NATIVE
 
				{"type": "com_distance",
	                                "selection_group_1": {
                                		"atoms": {
                        	                	"ids": ["$HBOND1"]
                	                       	}
        	                       	},
	                               	"selection_group_2": {
                                		"atoms": {
                        	                	"ids": ["$HBOND2"]
                                        }
	                                },
					"tag": "hbond_hinge"
				},


				{"type":"sasa",
					"selection" : {
						"chains": {
							"names": [ "$CHAIN" ]
				                }
					}
				}, 
				{ "type" : "bindingEnergy", 
					"boundPartSelection" : {"chains": { "names": [ "$CHAIN" ] } } 
				}, 
				{ "tag" : "rand", "type" : "random" }, 
				{ "tag" : "rand1", "type" : "random" },
				{ "tag" : "rand2", "type" : "random" }
			], 
			"parametersChanges" : [
				{ "ifAnyIsTrue": [ "rand >= 0.5" ], 
					"doThesechanges": { 
						"Perturbation::parameters": { "rotationScalingFactor": 0.30 } 
					}, 
					"otherwise": { 
						"Perturbation::parameters": { "rotationScalingFactor": 0.05 } 
					} 
				}, 
				{ "ifAnyIsTrue": [ "rand1 <= 0.20" ], 
					"doThesechanges": { 
						"Perturbation::parameters": { "translationRange": 0.5 } 
					}, 
					"otherwise": { "Perturbation::parameters": { "translationRange": 1.5 } } 
				}, 
                                { "ifAnyIsTrue": [ "rand2 <= 0.5 " ], 
					"doThesechanges": { 
						"Perturbation::parameters": { 
							"steeringUpdateFrequency": 0,
							"numberOfTrials": 10}
					}, 
					"otherwise": { 
						"Perturbation::parameters": { 
							"steeringUpdateFrequency": 1, 
							"numberOfTrials": 10}
					} 
				}, 
				{ "ifAnyIsTrue": [ "hbond_hinge <= 3.0 " ], 
					"doThesechanges": { 
						"Perturbation::parameters": { 
							"translationRange": 0.5, 
							"steeringUpdateFrequency": 0, 
							"numberOfTrials": 25 }
					},
                    "otherwise": {} 
				} 
			] 
		}]
	}] 
} 
