[sadm]
env = docker

[sadmenv]
target.dir = tdata/deploy.target/plugin/${sadm:env}

[sync]
sync.docker = assets/testing.txt testing.txt

[os.pkg]
update = no
common.enable = no

[docker]
enable = yes

[docker-compose:testing]
path = tdata/plugin/docker/compose

[_sadmtest.check]
builddir.file.systemd_service = /etc/systemd/system/docker-compose-testing.service e7ade0a13d61ddf4cf143cad1ddc1a8a

[_sadmtest.mock.deploy]
shutil =
	/root ; getcwd
	; chdir tdata/plugin/docker/compose
	; chdir /root
cmd.call =
	0; /usr/bin/dpkg-query -s docker.io >/dev/null 2>/dev/null
	0; /usr/bin/dpkg-query -s cgroupfs-mount >/dev/null 2>/dev/null
	0; /usr/bin/dpkg-query -s docker-compose >/dev/null 2>/dev/null
cmd.check_call =
	0; systemctl restart docker
	0; docker-compose build
	0; systemctl enable docker-compose-testing.service
	0; systemctl start docker-compose-testing.service
