1,4c1,5
< INTERNET-DRAFT                                               D. Eastlake
< Intended status: Proposed Standard                             L. Dunbar
< Expires: September 1, 2017					  Huawei
<                                                               R. Perlman
---
> 
> Network Working Group                                        D. Eastlake
> Internet-Draft                                                 L. Dunbar
> Intended status: Standards Track                                  Huawei
> Expires: September 3, 2017                                    R. Perlman
8c9
< 							   March 2, 2017
---
>                                                            March 2, 2017
11c12
<          <draft-ietf-trill-directory-assist-mechanisms-12.txt>
---
>           draft-ietf-trill-directory-assist-mechanisms-12.txt
19c20
<    flooding. It can also be used to detect traffic with forged source
---
>    flooding.  It can also be used to detect traffic with forged source
24c25
<    This Internet-Draft is submitted to IETF in full conformance with the
---
>    This Internet-Draft is submitted in full conformance with the
37c38,53
<    This Internet-Draft will expire on November 23, 2017.
---
>    This Internet-Draft will expire on September 3, 2017.
> 
> Copyright Notice
> 
>    Copyright (c) 2017 IETF Trust and the persons identified as the
>    document authors.  All rights reserved.
> 
>    This document is subject to BCP 78 and the IETF Trust's Legal
>    Provisions Relating to IETF Documents
>    (http://trustee.ietf.org/license-info) in effect on the date of
>    publication of this document.  Please review these documents
>    carefully, as they describe your rights and restrictions with respect
>    to this document.  Code Components extracted from this document must
>    include Simplified BSD License text as described in Section 4.e of
>    the Trust Legal Provisions and are provided without warranty as
>    described in the Simplified BSD License.
47c63
<    scalability. This document describes specific mechanisms for TRILL
---
>    scalability.  This document describes specific mechanisms for TRILL
55c71
<    TRILL switch, from which that MAC address is reachable. But it could
---
>    TRILL switch, from which that MAC address is reachable.  But it could
60c76
<    servers is beyond the scope of this document. A primary server can
---
>    servers is beyond the scope of this document.  A primary server can
65c81
<    center. Thus such orchestration software can be appropriate for
---
>    center.  Thus such orchestration software can be appropriate for
73c89
<    packets where the location of the destination is unknown. Although
---
>    packets where the location of the destination is unknown.  Although
75,77c91,93
<    such an environment. Directories need not be complete and in the case
<    that any ephemeral MAC addresses were in use, they would probably not
<    be included in directory information.
---
>    such an environment.  Directories need not be complete and in the
>    case that any ephemeral MAC addresses were in use, they would
>    probably not be included in directory information.
80c96
<    [RFC7067] at the option of the server. Push Mode, in which a
---
>    [RFC7067] at the option of the server.  Push Mode, in which a
82c98
<    interest, is specified in Section 2. Pull Mode, in which a TRILL
---
>    interest, is specified in Section 2.  Pull Mode, in which a TRILL
84,85c100,101
<    Section 3. More detail on modes of operation, including hybrid
<    Push/Pull, are provided in Section 4.
---
>    Section 3.  More detail on modes of operation, including hybrid Push/
>    Pull, are provided in Section 4.
87c103
< 1.1 Uses of Directory Information
---
> 1.1.  Uses of Directory Information
92,93c108,109
<    from a Pull Directory. However, the following are expected to be the
<    most common circumstances leading to directory information use. All
---
>    from a Pull Directory.  However, the following are expected to be the
>    most common circumstances leading to directory information use.  All
96,117c112,133
<    1. ARP requests and replies [RFC826] are normally broadcast. But a
<       directory assisted edge TRILL switch could intercept ARP messages
<       and reply if the TRILL switch has the relevant information
<       [ARPND].
< 
<    2. IPv6 ND (Neighbor Discovery [RFC4861]) requests and replies are
<       normally multicast.  Except in the case of Secure ND [RFC3971],
<       where possession of the right keying material might be required, a
<       directory assisted edge TRILL switch could intercept ND messages
<       and reply if the TRILL switch has the relevant information.
<       [ARPND]
< 
<    3. Unknown destination MAC addresses normally cause a native frame to
<       be flooded. An edge TRILL switch ingressing a native frame
<       necessarily has to determine if it knows the egress RBridge from
<       which the destination MAC address of the frame (in the frame's
<       VLAN or FGL) is reachable. It might have learned that information
<       from the directory or could query the directory if it does not
<       know it. Furthermore, if the edge TRILL switch has complete
<       directory information, it can detect a forged source MAC or IP
<       address in any native frame and discard the frame if it finds such
<       a forged address.
---
>    1.  ARP requests and replies [RFC826] are normally broadcast.  But a
>        directory assisted edge TRILL switch could intercept ARP messages
>        and reply if the TRILL switch has the relevant information
>        [ARPND].
> 
>    2.  IPv6 ND (Neighbor Discovery [RFC4861]) requests and replies are
>        normally multicast.  Except in the case of Secure ND [RFC3971],
>        where possession of the right keying material might be required,
>        a directory assisted edge TRILL switch could intercept ND
>        messages and reply if the TRILL switch has the relevant
>        information.  [ARPND]
> 
>    3.  Unknown destination MAC addresses normally cause a native frame
>        to be flooded.  An edge TRILL switch ingressing a native frame
>        necessarily has to determine if it knows the egress RBridge from
>        which the destination MAC address of the frame (in the frame's
>        VLAN or FGL) is reachable.  It might have learned that
>        information from the directory or could query the directory if it
>        does not know it.  Furthermore, if the edge TRILL switch has
>        complete directory information, it can detect a forged source MAC
>        or IP address in any native frame and discard the frame if it
>        finds such a forged address.
119c135
<    4. RARP [RFC903] (Reverse ARP) is similar to ARP as above.
---
>    4.  RARP [RFC903] (Reverse ARP) is similar to ARP as above.
121c137
< 1.2 Terminology
---
> 1.2.  Terminology
130a147
> 
133c150
<    CSNP Time: Complete Sequence Number PDU Time. See ESDADI [RFC7357]
---
>    CSNP Time: Complete Sequence Number PDU Time.  See ESDADI [RFC7357]
142c159
<    FR:   Flood Record flag bit. See Section 3.2.1.
---
>    FR:  Flood Record flag bit.  See Section 3.2.1.
144,145c161,163
<    Host: A physical server or a virtual machine. A host must have a MAC
<          address and usually has at least one IP address.
---
>    Host: A physical server or a virtual machine.  A host must have a MAC
> 
>   address and usually has at least one IP address.
148c166,167
<          Tree Roots sub-TLV" [RFC7176].
---
> 
>   Tree Roots sub-TLV" [RFC7176].
151c170
<          Tree Roots sub-TLV" [RFC7176].
---
>   Tree Roots sub-TLV" [RFC7176].
153,154c172,173
<    IP:   Internet Protocol. In this document, IP includes both IPv4 and
<          IPv6.
---
>    IP:  Internet Protocol.  In this document, IP includes both IPv4 and
>   IPv6.
162c181
<    OV:    Overflow flag bit. See Section 3.2.2.1.
---
>    OV:    Overflow flag bit.  See Section 3.2.2.1.
164c183
<    PDSS: Push Directory Server Status. See Sections 2 and 7.1.
---
>    PDSS: Push Directory Server Status.  See Sections 2 and 7.1.
166c185
<    PUL:  Pull Directory flag bit. See Sections 3 and 7.3.
---
>    PUL:  Pull Directory flag bit.  See Sections 3 and 7.3.
169,171c188,191
<          serving up by a reliable mechanism outside the scope of this
<          document designed to assure the freshness of that information.
<          (See secondary server.)
---
> 
>   serving up by a reliable mechanism outside the scope of this document
>   designed to assure the freshness of that information.  (See secondary
>   server.)
175a196
> 
185c206
< 2. Push Model Directory Assistance Mechanisms
---
> 2.  Push Model Directory Assistance Mechanisms
194c215
<    and has actually pushed all the information it has. It might be
---
>    and has actually pushed all the information it has.  It might be
196c217
<    for a Data Label. The Push Model uses the ESADI [RFC7357] (End
---
>    for a Data Label.  The Push Model uses the ESADI [RFC7357] (End
205c226
<    (ingressing it as an unknown MAC destination TRILL Data frame). But
---
>    (ingressing it as an unknown MAC destination TRILL Data frame).  But
209c230
< 2.1 Requesting Push Service
---
> 2.1.  Requesting Push Service
216c237
<    Interested Labels sub-TLVs [RFC7176]. This will cause the Directory
---
>    Interested Labels sub-TLVs [RFC7176].  This will cause the Directory
220c241
< 2.2 Push Directory Servers
---
> 2.2.  Push Directory Servers
226c247
<    Section 7.1) to a non-zero value. This PDSS field setting is visible
---
>    Section 7.1) to a non-zero value.  This PDSS field setting is visible
228c249
<    for that Data Label. Each Push Directory server MUST participate in
---
>    for that Data Label.  Each Push Directory server MUST participate in
234,236c255,257
<    Servers for each Data Label. Each Push Directory server is configured
<    with a number N in the range 1 to 8, which defaults to 2, for each
<    Data Label for which it can push directory information (see
---
>    Servers for each Data Label.  Each Push Directory server is
>    configured with a number N in the range 1 to 8, which defaults to 2,
>    for each Data Label for which it can push directory information (see
243,248c264,269
<    (PushDirPriority) to be Active, which defaults to 0x3F (see Section
<    2.7). This priority is treated as an unsigned integer where larger
<    magnitude means higher priority. This priority appears in its ESADI
<    Parameter APPsub-TLV (see Section 7.1). In case of a tie in this
<    configurable priority, the System ID of the TRILL switch acting as
<    the server is used as an unsigned 6-byte integer where larger
---
>    (PushDirPriority) to be Active, which defaults to 0x3F (see
>    Section 2.7).  This priority is treated as an unsigned integer where
>    larger magnitude means higher priority.  This priority appears in its
>    ESADI Parameter APPsub-TLV (see Section 7.1).  In case of a tie in
>    this configurable priority, the System ID of the TRILL switch acting
>    as the server is used as an unsigned 6-byte integer where larger
253c274
<    the desired number of copies. It does this by ordering, by priority,
---
>    the desired number of copies.  It does this by ordering, by priority,
258c279
<    order. If a Push Directory server's configuration indicates that N
---
>    order.  If a Push Directory server's configuration indicates that N
263c284
<    Directory server is Active. If K is greater than N it is Stand-By.
---
>    Directory server is Active.  If K is greater than N it is Stand-By.
269c290
<    Directory servers. It appears to the rest of the TRILL campus that
---
>    Directory servers.  It appears to the rest of the TRILL campus that
271c292
<    Push Directory server(s). The protocol between such a Push Directory
---
>    Push Directory server(s).  The protocol between such a Push Directory
275c296
< 2.3 Push Directory Server State Machine
---
> 2.3.  Push Directory Server State Machine
291c312
< 2.3.1 Push Directory States
---
> 2.3.1.  Push Directory States
294c315
<    for each Data Label it can serve. The name of each state is followed
---
>    for each Data Label it can serve.  The name of each state is followed
296c317
<    the state. The value that the Push Directory Server advertises in
---
>    the state.  The value that the Push Directory Server advertises in
303,304c324,325
<       convenience in specifying state diagrams. A Push Directory Server
<       in this state does not advertise any Push Directory data. It may
---
>       convenience in specifying state diagrams.  A Push Directory Server
>       in this state does not advertise any Push Directory data.  It may
307c328
<       all. All states other than the Down state are considered to be Up
---
>       all.  All states other than the Down state are considered to be Up
310c331,332
<    Stand-By <S2>:  No Push Directory data is advertised. Any outstanding
---
>    Stand-By <S2>:  No Push Directory data is advertised.  Any
>       outstanding
318a341
> 
320c343
<       Parameters APPsub-TLV with the PDSS field set to 2. It also
---
>       Parameters APPsub-TLV with the PDSS field set to 2.  It also
326c349
<       that the server responds differently to events. The purpose of
---
>       that the server responds differently to events.  The purpose of
337c360
<       that the server responds differently to events. The purpose of
---
>       that the server responds differently to events.  The purpose of
345,346c368,369
<       responds differently to events. The purpose of this state is to be
<       sure that the information, that the directory will no longer be
---
>       responds differently to events.  The purpose of this state is to
>       be sure that the information, that the directory will no longer be
349c372
<       might stop advertising updates to the information. (See note
---
>       might stop advertising updates to the information.  (See note
352,364c375,390
<          Note:  It might appear that a Push Directory could transition
<          directly from Active Complete to Active, since Active state
<          continues to advertise updates, eliminating the need for the
<          Active Uncompleting transition state. But consider the case of
<          the Push Directory that was complete being configured to be
<          incomplete and then the Stand-By Condition (see Section 2.3.2)
<          occurring shortly thereafter. If the first of these two events
<          caused the server to transition directly to the Active state
<          then, when the Stand-By Condition occurred, it would
<          immediately transition to Stand-By and stop advertising updates
<          even though there might not have been enough time for knowledge
<          of its incompleteness to have propagated to all edge TRILL
<          switches.
---
>       Note:        It might appear that a Push Directory could
>                    transition
>                    directly from Active Complete to Active, since Active
>                    state continues to advertise updates, eliminating the
>                    need for the Active Uncompleting transition state.
>                    But consider the case of the Push Directory that was
>                    complete being configured to be incomplete and then
>                    the Stand-By Condition (see Section 2.3.2) occurring
>                    shortly thereafter.  If the first of these two events
>                    caused the server to transition directly to the
>                    Active state then, when the Stand-By Condition
>                    occurred, it would immediately transition to Stand-By
>                    and stop advertising updates even though there might
>                    not have been enough time for knowledge of its
>                    incompleteness to have propagated to all edge TRILL
>                    switches.
378c404
< 2.3.2 Push Directory Events and Conditions
---
> 2.3.2.  Push Directory Events and Conditions
385c411
<       Directory server should be active. This is determined by the
---
>       Directory server should be active.  This is determined by the
389,390c415,416
<       pushed for Data Label X, and (C) K is less than or equal to N. For
<       example, if the Push Directory server is configured so that 2
---
>       pushed for Data Label X, and (C) K is less than or equal to N.
>       For example, if the Push Directory server is configured so that 2
398c424
<       Directory server should be stand-by (not active). This is
---
>       Directory server should be stand-by (not active).  This is
403c429
<       than N. For example, the Push Directory server is configured that
---
>       than N.  For example, the Push Directory server is configured that
408a435
> 
416c443
<    1. Push Directory server comes Up.
---
>    1.  Push Directory server comes Up.
418,426c445,453
<    2. The Push Directory server or the TRILL switch on which it resides
<       is being shut down. This is a persistent condition unless the shut
<       down is canceled. So, for example, a Push Directory server in the
<       Going Stand-By Was Complete state does not transition out of that
<       state due to this condition but, after the Time Condition is met
<       and the directory transitions to Stand-By and performs the actions
<       required there (such as purging LSPs) continues to the Down state
<       if this condition is still true. Similar comments apply to
<       events/conditions 3, 4, and 5.
---
>    2.  The Push Directory server or the TRILL switch on which it resides
>        is being shut down.  This is a persistent condition unless the
>        shut down is canceled.  So, for example, a Push Directory server
>        in the Going Stand-By Was Complete state does not transition out
>        of that state due to this condition but, after the Time Condition
>        is met and the directory transitions to Stand-By and performs the
>        actions required there (such as purging LSPs) continues to the
>        Down state if this condition is still true.  Similar comments
>        apply to events/conditions 3, 4, and 5.
428,429c455,456
<    3. The Activate Condition is met and the server's configuration
<       indicates it does not have complete data.
---
>    3.  The Activate Condition is met and the server's configuration
>        indicates it does not have complete data.
431c458
<    4. The Stand-By Condition is met.
---
>    4.  The Stand-By Condition is met.
433,434c460,461
<    5. The Activate Condition is met and the server's configuration
<       indicates it has complete data.
---
>    5.  The Activate Condition is met and the server's configuration
>        indicates it has complete data.
436,437c463,464
<    6. The server's configuration is changed to indicate it does not have
<       complete data.
---
>    6.  The server's configuration is changed to indicate it does not
>        have complete data.
439c466
<    7. The Time Condition is met.
---
>    7.  The Time Condition is met.
441c468
< 2.3.3 State Transition Diagram and Table
---
> 2.3.3.  State Transition Diagram and Table
501c528
<                     Figure 1. Push Server State Diagram
---
>                     Figure 1: Push Server State Diagram
503c530
< 2.4 End Stations and Push Directories
---
> 2.4.  End Stations and Push Directories
506c533
<    scope of this document. Push Directory information distribution is
---
>    scope of this document.  Push Directory information distribution is
508c535
<    stations. In the future, ESADI might be extended to operate to end
---
>    stations.  In the future, ESADI might be extended to operate to end
512c539
< 2.5 Additional Push Details
---
> 2.5.  Additional Push Details
525c552
<    bandwidth and ESADI link state space. An exception might be when a
---
>    bandwidth and ESADI link state space.  An exception might be when a
540,549c567,577
<    it is impossible for a TRILL switch receiving Push Directory
<    information to be absolutely certain that it has complete
<    information.  However, it can obtain a reasonable assurance of
<    complete information by requiring two conditions to be met:
<       1. The PDSS field is 3 in the ESADI zero fragment from the server
<          for the relevant Data Label.
<       2. In so far as it can tell, it has had continuous data
<          connectivity to the server for a configurable amount of time
<          that defaults to twice the server's CSNP time (PushDirTimer,
<          see Section 2.7).
---
>   it is impossible for a TRILL switch receiving Push Directory
>   information to be absolutely certain that it has complete information.
>   However, it can obtain a reasonable assurance of complete information
>   by requiring two conditions to be met:
> 
>    1.  The PDSS field is 3 in the ESADI zero fragment from the server
>        for the relevant Data Label.
> 
>    1.  In so far as it can tell, it has had continuous data connectivity
>        to the server for a configurable amount of time that defaults to
>        twice the server's CSNP time (PushDirTimer, see Section 2.7).
551,553c579,582
<    coming up and receive an EASDI LSP meeting the requirement in
<    condition 1 above but has not yet received all of the ESADI LSP
<    fragments from the Push Directory server.
---
> 
>   coming up and receive an EASDI LSP meeting the requirement in
>   condition 1 above but has not yet received all of the ESADI LSP
>   fragments from the Push Directory server.
559c588
<    particular RBridge in the TRILL campus. Thus, there is commonly a
---
>    particular RBridge in the TRILL campus.  Thus, there is commonly a
568,569c597,598
<    information and information received from a Push Directory server. In
<    case of such conflicts, information with a higher confidence value
---
>    information and information received from a Push Directory server.
>    In case of such conflicts, information with a higher confidence value
571c600
<    confidence. In case of equal confidence, Push Directory information
---
>    confidence.  In case of equal confidence, Push Directory information
576c605
< 2.6 Primary to Secondary Server Push Service
---
> 2.6.  Primary to Secondary Server Push Service
579c608
<    data from a primary directory server. Such mechanisms, where some
---
>    data from a primary directory server.  Such mechanisms, where some
590,592c619,621
<    Directory server and re-originates it. Such a secondary server may be
<    a Push Directory server or a Pull Directory server or both for any
<    particular Data Label. Because the data from a secondary server will
---
>    Directory server and re-originates it.  Such a secondary server may
>    be a Push Directory server or a Pull Directory server or both for any
>    particular Data Label.  Because the data from a secondary server will
599c628
< 2.7 Push Directory Configuration
---
> 2.7.  Push Directory Configuration
612c641
<    PushDirService is a boolean. When false, Push Directory service is
---
>    PushDirService is a boolean.  When false, Push Directory service is
615c644
<    PushDirComplete is a boolean. When false, the server never indicates
---
>    PushDirComplete is a boolean.  When false, the server never indicates
622c651
< 3. Pull Model Directory Assistance Mechanisms
---
> 3.  Pull Model Directory Assistance Mechanisms
629c658
<    and its link state database and link state updating. For example,
---
>    and its link state database and link state updating.  For example,
634c663
<    Interested Labels sub-TLV (see Section 7.3) for that Data Label. The
---
>    Interested Labels sub-TLV (see Section 7.3) for that Data Label.  The
639c668
<    network partition or merger. As described in Section 3.7, a TRILL
---
>    network partition or merger.  As described in Section 3.7, a TRILL
652,659c681,688
<    Channel message using the same channel protocol number. See Section
<    3.2 for Query and Response Message formats. For cache consistency or
<    notification purposes, Pull Directory servers, under certain
<    conditions, MUST send unsolicited Update Messages to client TRILL
<    switches they believe may be holding old data and those clients can
<    acknowledge such updates, as described in Section 3.3. All these
<    messages have a common header as described in Section 3.1. Errors are
<    returned as described in Section 3.6.
---
>    Channel message using the same channel protocol number.  See
>    Section 3.2 for Query and Response Message formats.  For cache
>    consistency or notification purposes, Pull Directory servers, under
>    certain conditions, MUST send unsolicited Update Messages to client
>    TRILL switches they believe may be holding old data and those clients
>    can acknowledge such updates, as described in Section 3.3.  All these
>    messages have a common header as described in Section 3.1.  Errors
>    are returned as described in Section 3.6.
668,677c697,706
<    response should be considered valid. This includes negative responses
<    that indicate no data is available. It is RECOMMENDED that both
<    positive responses with data and negative responses be cached and
<    used to locally handle ARP, ND, RARP, unknown destination MAC frames,
<    or the like [ARPND], until the responses expire. If information
<    previously pulled is about to expire, a TRILL switch MAY try to
<    refresh it by issuing a new pull request but, to avoid unnecessary
<    requests, SHOULD NOT do so unless it has been recently used. The
<    validity timer of cached Pull Directory responses is NOT reset or
<    extended merely because that cache entry is used.
---
>    response should be considered valid.  This includes negative
>    responses that indicate no data is available.  It is RECOMMENDED that
>    both positive responses with data and negative responses be cached
>    and used to locally handle ARP, ND, RARP, unknown destination MAC
>    frames, or the like [ARPND], until the responses expire.  If
>    information previously pulled is about to expire, a TRILL switch MAY
>    try to refresh it by issuing a new pull request but, to avoid
>    unnecessary requests, SHOULD NOT do so unless it has been recently
>    used.  The validity timer of cached Pull Directory responses is NOT
>    reset or extended merely because that cache entry is used.
679c708
< 3.1 Pull Directory Message Common Format
---
> 3.1.  Pull Directory Message Common Format
697c726
<          integer.  Version zero is specified in this document. See
---
>          integer.  Version zero is specified in this document.  See
713c742,743
<          message Type. Flags whose meanings are not specified are
---
> 
>          message Type.  Flags whose meanings are not specified are
718,719c748,749
<          specific payload. The Count field is the number of occurrences
<          of that Record as an unsigned integer. For any Pull Directory
---
>          specific payload.  The Count field is the number of occurrences
>          of that Record as an unsigned integer.  For any Pull Directory
724c754
<          messages that are in the nature of replies. In messages that
---
>          messages that are in the nature of replies.  In messages that
726,727c756,757
<          ignored on receipt. An Err field containing the value zero
<          means no error. The meaning of values in the SubErr field
---
>          ignored on receipt.  An Err field containing the value zero
>          means no error.  The meaning of values in the SubErr field
734c764
<          returned in every corresponding reply or acknowledgment. It is
---
>          returned in every corresponding reply or acknowledgment.  It is
741c771
< 3.1.1 Version Negotiation
---
> 3.1.1.  Version Negotiation
763c793
<    responds normally in Ver1 format. However, if the responder does not
---
>    responds normally in Ver1 format.  However, if the responder does not
765c795
<    correctly formatted for Ver1. Thus all implementations that support
---
>    correctly formatted for Ver1.  Thus all implementations that support
770c800
< 3.2 Pull Directory Query and Response Messages
---
> 3.2.  Pull Directory Query and Response Messages
775c805
< 3.2.1 Pull Directory Query Message Format
---
> 3.2.1.  Pull Directory Query Message Format
781c811
<    being made. The priority of the channel message is a mapping of the
---
>    being made.  The priority of the channel message is a mapping of the
785c815
<    queries. (Generated queries are those not the result of a mapping.
---
>    queries.  (Generated queries are those not the result of a mapping.
808c838,839
<       Type: 1 for Query. Queries received by an TRILL switch that is not
---
>       Type: 1 for Query.  Queries received by an TRILL switch that is
>       not
817c848,849
<       Count: Number of QUERY Records present. A Query Message Count of
---
>       Count: Number of QUERY Records present.  A Query Message Count of
> 
819,820c851,852
<          Directory server to see if it is responding. On receipt of such
<          an empty Query Message, a Response Message that also has a
---
>          Directory server to see if it is responding.  On receipt of
>          such an empty Query Message, a Response Message that also has a
823a856
> 
841,862c874,895
<          SIZE: Size of the QUERY Record in bytes as an unsigned integer
<             not including the SIZE field and following byte. A value of
<             SIZE so large that the material doesn't fit in the Query
<             Message indicates a malformed QUERY Record. The QUERY Record
<             with the illegal SIZE value and any subsequent QUERY Records
<             MUST be ignored and the entire Query Message MAY be ignored.
< 
<          FR: The Flood Record flag that is ignored if QTYPE is zero. If
<             QTYPE is 2 or 5 and the directory information sought is not
<             found, the frame provided is flooded, otherwise it is not
<             forwarded. See Section 3.2.2.2. For QTYPEs other than 2 or
<             5, the FR flag has no effect.
< 
<          RESV: A block of three reserved bits. MUST be sent as zero and
<             ignored on receipt.
< 
<          QTYPE: There are several types of QUERY Records currently
<             defined in two classes as follows: (1) a QUERY Record that
<             provides an explicit address and asks for all addresses for
<             the interface specified by the query address and (2) a QUERY
<             Record that includes a frame. The fields of each are
<             specified below. Values of QTYPE are as follows:
---
>       SIZE: Size of the QUERY Record in bytes as an unsigned integer
>          not including the SIZE field and following byte.  A value of
>          SIZE so large that the material doesn't fit in the Query
>          Message indicates a malformed QUERY Record.  The QUERY Record
>          with the illegal SIZE value and any subsequent QUERY Records
>          MUST be ignored and the entire Query Message MAY be ignored.
> 
>       FR: The Flood Record flag that is ignored if QTYPE is zero.  If
>          QTYPE is 2 or 5 and the directory information sought is not
>          found, the frame provided is flooded, otherwise it is not
>          forwarded.  See Section 3.2.2.2.  For QTYPEs other than 2 or 5,
>          the FR flag has no effect.
> 
>       RESV: A block of three reserved bits.  MUST be sent as zero and
>          ignored on receipt.
> 
>       QTYPE: There are several types of QUERY Records currently
>          defined in two classes as follows: (1) a QUERY Record that
>          provides an explicit address and asks for all addresses for the
>          interface specified by the query address and (2) a QUERY Record
>          that includes a frame.  The fields of each are specified below.
>          Values of QTYPE are as follows:
876,908c909,938
<             Query Address: The query is asking for any other addresses,
<                and the nickname of the TRILL switch from which they are
<                reachable, that correspond to the same interface as this
<                address, within the Data Label of the query of the
<                address provided. A typically Query Address would be
<                something like the following:
<                (1) A 48-bit MAC address with the querying TRILL switch
<                    primarily interested in either
<                    (1a) the RBridge by which that MAC address is
<                         reachable so that the querying RBridge can
<                         forward an unknown (before the query)
<                         destination MAC address native frame as a
<                         unicast TRILL Data packet rather than flooding
<                         it, or
<                    (1b) the IP address corresponding to the MAC address
<                         so that RBridge can locally respond to a RARP
<                         [RFC903] native frame.
<                (2) An IPv4 or IPv6 address with the querying RBridge
<                    interested in the corresponding MAC address so it can
<                    locally respond to an ARP [RFC826] or ND [RFC4861]
<                    native frame [ARPND].
<                But the query address could be some other address type
<                for which an AFN has been assigned, such as a 64-bit MAC
<                address [RFC7042] or a CLNS address [X.233].
< 
<             Query Frame: Where a QUERY Record is the result of an ARP,
<                ND, RARP, SEND, or unknown unicast MAC destination
<                address, the ingress TRILL switch MAY send the frame to a
<                Pull Directory Server if the frame is small enough that
<                the resulting Query Message fits into a TRILL Data packet
<                within the campus MTU. The full frame is included,
<                starting with the destination and source MAC addresses
<                but does not include the FCS.
---
>       Query Address: The query is asking for any other addresses,
>          and the nickname of the TRILL switch from which they are
>          reachable, that correspond to the same interface as this
>          address, within the Data Label of the query of the address
>          provided.  A typically Query Address would be something like
>          the following: (1) A 48-bit MAC address with the querying TRILL
>          switch primarily interested in either (1a) the RBridge by which
>          that MAC address is reachable so that the querying RBridge can
>          forward an unknown (before the query) destination MAC address
>          native frame as a unicast TRILL Data packet rather than
>          flooding it, or
> 
>               (1b) the IP address corresponding to the MAC address so
>               that RBridge can locally respond to a RARP [RFC903] native
>               frame.
> 
>               (2) An IPv4 or IPv6 address with the querying RBridge
>                   interested in the corresponding MAC address so it can
>                   locally respond to an ARP [RFC826] or ND [RFC4861]
>                   native frame [ARPND].
>               But the query address could be some other address type
>                   for which an AFN has been assigned, such as a 64-bit
>                   MAC address [RFC7042] or a CLNS address [X.233].
>       Query Frame: Where a QUERY Record is the result of an ARP,
>          ND, RARP, SEND, or unknown unicast MAC destination address, the
>          ingress TRILL switch MAY send the frame to a Pull Directory
>          Server if the frame is small enough that the resulting Query
>          Message fits into a TRILL Data packet within the campus MTU.
>          The full frame is included, starting with the destination and
>          source MAC addresses but does not include the FCS.
913,920c943,950
<    (up to a configurable number of times (DirQueryRetries, see Section
<    3.9)). If there are multiple QUERY Records in a Query Message,
<    responses can be received to various subsets of these QUERY Records
<    before the timeout.  In that case, the remaining unanswered QUERY
<    Records should be re-sent in a new Query Message with a new sequence
<    number.  If a TRILL switch is not capable of handling partial
<    responses to queries with multiple QUERY Records, it MUST NOT send a
<    Request Message with more than one QUERY Record in it.
---
>    (up to a configurable number of times (DirQueryRetries, see
>    Section 3.9)).  If there are multiple QUERY Records in a Query
>    Message, responses can be received to various subsets of these QUERY
>    Records before the timeout.  In that case, the remaining unanswered
>    QUERY Records should be re-sent in a new Query Message with a new
>    sequence number.  If a TRILL switch is not capable of handling
>    partial responses to queries with multiple QUERY Records, it MUST NOT
>    send a Request Message with more than one QUERY Record in it.
925c955
< 3.2.2 Pull Directory Responses
---
> 3.2.2.  Pull Directory Responses
934c964
< 3.2.2.1 Pull Directory Response Message Format
---
> 3.2.2.1.  Pull Directory Response Message Format
971c1001,1002
<       Err, SubErr: A two-part error code. Zero unless there was an error
---
>       Err, SubErr: A two-part error code.  Zero unless there was an
>       error
986,1032c1017,1063
<          SIZE: The size of the RESPONSE Record is an unsigned integer
<             number of bytes not including the SIZE field and following
<             byte. A value of SIZE so large that the material doesn't fit
<             in the Query Message indicates a malformed RESPONSE Record.
<             The RESPONSE Record with such an excessive SIZE value and
<             any subsequent RESPONSE Records MUST be ignored and the
<             entire Response Message MAY be ignored.
< 
<          OV: The overflow flag. Indicates, as described below, that
<             there was too much Response Data to include in one Response
<             Message.
< 
<          RESV: Three reserved bits that MUST be sent as zero and ignored
<             on receipt.
< 
<          Index: The relative index of the QUERY Record in the Query
<             Message to which this RESPONSE Record corresponds. The index
<             will always be one for Query Messages containing a single
<             QUERY Record. If the Index is larger than the Count was in
<             the corresponding Query, that RESPONSE Record MUST be
<             ignored and subsequent RESPONSE Records or the entire
<             Response Message MAY be ignored.
< 
<          Lifetime: The length of time for which the response should be
<             considered valid in units of 100 milliseconds except that
<             the values zero and 2**16-1 are special. If zero, the
<             response can only be used for the particular query from
<             which it resulted and MUST NOT be cached. If 2**16-1, the
<             response MAY be kept indefinitely but not after the Pull
<             Directory server goes down or becomes unreachable. (The
<             maximum definite time that can be expressed is a little over
<             1.8 hours.)
< 
<          Response Data: There are three types of RESPONSE Records.
<             -  If the Err field of the enclosing Response Message has a
<                message level error code in it, then the RESPONSE Records
<                are omitted and Count will be zero. See Section 3.6 for
<                additional information on errors.
<             -  If the Err field of the enclosing Response Message has a
<                record level error code in it, then the RESPONSE Records
<                are those in error as further described in Section 3.6.
<             -  If the Err field of the enclosing Response Message is
<                zero, then the Response Data in each RESPONSE Record is
<                formatted as the value part of an Interface Addresses
<                APPsub-TLV [RFC7961]. The maximum size of such contents
<                is 255 bytes, in which case the RESPONSE Record SIZE
<                field is 255.
---
>       SIZE: The size of the RESPONSE Record is an unsigned integer
>          number of bytes not including the SIZE field and following
>          byte.  A value of SIZE so large that the material doesn't fit
>          in the Query Message indicates a malformed RESPONSE Record.
>          The RESPONSE Record with such an excessive SIZE value and any
>          subsequent RESPONSE Records MUST be ignored and the entire
>          Response Message MAY be ignored.
> 
>       OV: The overflow flag.  Indicates, as described below, that
>          there was too much Response Data to include in one Response
>          Message.
> 
>       RESV: Three reserved bits that MUST be sent as zero and ignored
>          on receipt.
> 
>       Index: The relative index of the QUERY Record in the Query
>          Message to which this RESPONSE Record corresponds.  The index
>          will always be one for Query Messages containing a single QUERY
>          Record.  If the Index is larger than the Count was in the
>          corresponding Query, that RESPONSE Record MUST be ignored and
>          subsequent RESPONSE Records or the entire Response Message MAY
>          be ignored.
> 
>       Lifetime: The length of time for which the response should be
>          considered valid in units of 100 milliseconds except that the
>          values zero and 2**16-1 are special.  If zero, the response can
>          only be used for the particular query from which it resulted
>          and MUST NOT be cached.  If 2**16-1, the response MAY be kept
>          indefinitely but not after the Pull Directory server goes down
>          or becomes unreachable.  (The maximum definite time that can be
>          expressed is a little over 1.8 hours.)
> 
>       Response Data: There are three types of RESPONSE Records.
> 
>          -  If the Err field of the enclosing Response Message has a
>             message level error code in it, then the RESPONSE Records
>             are omitted and Count will be zero.  See Section 3.6 for
>             additional information on errors.
> 
>          -  If the Err field of the enclosing Response Message has a
>             record level error code in it, then the RESPONSE Records are
>             those in error as further described in Section 3.6.
>          -  If the Err field of the enclosing Response Message is zero,
>             then the Response Data in each RESPONSE Record is formatted
>             as the value part of an Interface Addresses APPsub-TLV
>             [RFC7961].  The maximum size of such contents is 255 bytes,
>             in which case the RESPONSE Record SIZE field is 255.
1036c1067
<    Interface Address APPsub-TLV values. This would be necessary if, for
---
>    Interface Address APPsub-TLV values.  This would be necessary if, for
1038,1040c1069,1071
<    multiple TRILL switches. However, all RESPONSE Records to any
<    particular QUERY Record MUST occur in the same Response Message. If a
<    Pull Directory holds more mappings for a queried address than will
---
>    multiple TRILL switches.  However, all RESPONSE Records to any
>    particular QUERY Record MUST occur in the same Response Message.  If
>    a Pull Directory holds more mappings for a queried address than will
1047c1078
< 3.2.2.2 Pull Directory Forwarding
---
> 3.2.2.2.  Pull Directory Forwarding
1050,1056c1081,1087
<    described below. In these cases, if the information implicitly sought
<    is not in the directory and the FR flag in the query message was one,
<    the provided frame is forwarded by the Pull Directory server as a
<    multi-destination TRILL Data packet with the ingress nickname of the
<    Pull Directory server (or proxy if it is hosted on an end station) in
<    the TRILL header. If the FR flag is zero, the frame is not forwarded
<    in this case.
---
>    described below.  In these cases, if the information implicitly
>    sought is not in the directory and the FR flag in the query message
>    was one, the provided frame is forwarded by the Pull Directory server
>    as a multi-destination TRILL Data packet with the ingress nickname of
>    the Pull Directory server (or proxy if it is hosted on an end
>    station) in the TRILL header.  If the FR flag is zero, the frame is
>    not forwarded in this case.
1062a1094
> 
1068,1071c1100,1103
<       [RFC826].) If ar$op is not ares_op$REQUEST or the ARP is malformed
<       or the query fails, an error is returned. Otherwise the ARP is
<       modified into the appropriate ARP response that is then sent by
<       the Pull Directory server as a TRILL Data packet.
---
>       [RFC826].)  If ar$op is not ares_op$REQUEST or the ARP is
>       malformed or the query fails, an error is returned.  Otherwise the
>       ARP is modified into the appropriate ARP response that is then
>       sent by the Pull Directory server as a TRILL Data packet.
1077,1083c1109,1115
<       ARP query) are allowed. An error is returned for other ND frames
<       or if the target address is not found. Otherwise, if the ND is not
<       a SEND, an ND Neighbor Advertisement response is returned by the
<       Pull Directory server as a TRILL Data packet. In the case of SEND
<       [RFC3971], an error is returned indicating that SEND was received
<       by the Pull Directory and the Pull Directory then either forwards
<       the SEND frame to the holder of the IPv6 address if that
---
>       ARP query) are allowed.  An error is returned for other ND frames
>       or if the target address is not found.  Otherwise, if the ND is
>       not a SEND, an ND Neighbor Advertisement response is returned by
>       the Pull Directory server as a TRILL Data packet.  In the case of
>       SEND [RFC3971], an error is returned indicating that SEND was
>       received by the Pull Directory and the Pull Directory then either
>       forwards the SEND frame to the holder of the IPv6 address if that
1087a1120
> 
1090c1123
<       described above. Otherwise the ar$op field MUST be 'reverse
---
>       described above.  Otherwise the ar$op field MUST be 'reverse
1093,1095c1126,1128
<       of that address is given by ar$hrd. (See [RFC826] for RARP
<       fields.) If ar$op is not one of these values or the RARP is
<       malformed or the query fails, an error is returned. Otherwise the
---
>       of that address is given by ar$hrd.  (See [RFC826] for RARP
>       fields.)  If ar$op is not one of these values or the RARP is
>       malformed or the query fails, an error is returned.  Otherwise the
1103,1105c1136,1138
<       unicast. The Ethertype in the QUERY Record is ignored. If it is
<       group addressed an error is returned. For the response described
<       in 3.2.2.1, it is treated as a query for the MacDA. If the Pull
---
>       unicast.  The Ethertype in the QUERY Record is ignored.  If it is
>       group addressed an error is returned.  For the response described
>       in 3.2.2.1, it is treated as a query for the MacDA.  If the Pull
1110c1143
< 3.3 Cache Consistency
---
> 3.3.  Cache Consistency
1115c1148
<    information from that Pull Directory. The format of Update Messages
---
>    information from that Pull Directory.  The format of Update Messages
1123,1141c1156,1177
<      Method 1, Least Specific. An overall record per Data Label of when
<         the last positive response data sent will expire and when the
<         last negative response sent will expire; the records are
<         retained until such expiration.
<            Pro: Minimizes the record keeping burden on the Pull
<         Directory server.
<            Con: Increases the volume of and overhead due to spontaneous
<         Update Messages and due to unnecessarily invalidating cached
<         information.
< 
<      Method 2, Medium Specificity. For each unit of data (IA APPsub-TLV
<         Address Set [RFC7961]) held by the server, record when the last
<         response sent with that positive response data will expire. In
<         addition, record each address about which a negative response
<         was sent by the server and when the last such negative response
<         will expire. Each such record of a positive or negative response
<         is discarded upon expiration.
<            Pro/Con: An intermediate level of detail in server record
<         keeping and an intermediate volume of and overhead due to
---
>       Method 1, Least Specific.  An overall record per Data Label of
>       when
>          the last positive response data sent will expire and when the
>          last negative response sent will expire; the records are
>          retained until such expiration.  Pro: Minimizes the record
>          keeping burden on the Pull
> 
>          Directory server.
>             Con: Increases the volume of and overhead due to spontaneous
>          Update Messages and due to unnecessarily invalidating cached
>             information.
>       Method 2, Medium Specificity.  For each unit of data (IA APPsub-
>       TLV
>          Address Set [RFC7961]) held by the server, record when the last
>          response sent with that positive response data will expire.  In
>          addition, record each address about which a negative response
>          was sent by the server and when the last such negative response
>          will expire.  Each such record of a positive or negative
>          response is discarded upon expiration.  Pro/Con: An
>          intermediate level of detail in server record
> 
>          keeping and an intermediate volume of and overhead due to
1143a1180
>       Method 3, Most Specific.  For each unit of data held by the server
1145,1157c1182,1194
<      Method 3, Most Specific. For each unit of data held by the server
<         (IA APPsub-TLV Address Set [RFC7961]) and each address about
<         which a negative response was sent, a list of TRILL switches
<         that were sent that data as a positive response or sent a
<         negative response for the address, and the expected time to
<         expiration for that data or address at each such TRILL switch,
<         assuming the requester cached the response. Each list entry is
<         retained until such expiration time.
<            Pro: Minimizes spontaneous Update Messages sent to update
<         pull client TRILL switch caches and minimizes unnecessary
<         invalidation of cached information.
<            Con: Increased record keeping burden on the Pull Directory
<         server.
---
>          (IA APPsub-TLV Address Set [RFC7961]) and each address about
>          which a negative response was sent, a list of TRILL switches
>          that were sent that data as a positive response or sent a
>          negative response for the address, and the expected time to
>          expiration for that data or address at each such TRILL switch,
>          assuming the requester cached the response.  Each list entry is
>          retained until such expiration time.  Pro: Minimizes
>          spontaneous Update Messages sent to update
> 
>          pull client TRILL switch caches and minimizes unnecessary
>             invalidation of cached information.  Con: Increased record
>             keeping burden on the Pull Directory
>          server.
1160,1163c1197,1200
<    already expired and so do not need to be tracked. In all cases, there
<    may still be brief periods of time when directory information has
<    changed, but information a pull client has cached has not yet been
<    updated or expunged.
---
>    already expired and so do not need to be tracked.  In all cases,
>    there may still be brief periods of time when directory information
>    has changed, but information a pull client has cached has not yet
>    been updated or expunged.
1168c1205
<    expiry information for by method 2 or the like. If such limits are
---
>    expiry information for by method 2 or the like.  If such limits are
1177c1214
<    Pull Directory MUST send an Update Message as discussed below. The
---
>    Pull Directory MUST send an Update Message as discussed below.  The
1182,1260c1219,1306
<      1. If method 1, the least detailed method, is being followed, then
<         when any Pull Directory information in a Data Label is changed
<         or deleted and there are outstanding cached positive data
<         response(s), an all-addresses flush positive data Update Message
<         is flooded within that Data Label as an RBridge Channel Message.
<         Similarly if data is added and there are outstanding cached
<         negative responses, an all-addresses flush negative message is
<         similarly flooded. The Count field is zero in an Update Message
<         indicates "all-addresses". On receiving an all-addresses flooded
<         flush positive Update from a Pull Directory server it has used,
<         indicated by the F and P bits being one and the Count being
<         zero, a TRILL switch discards the cached data responses it has
<         for that Data Label.  Similarly, on receiving an all addresses
<         flush negative Update, indicated by the F and N bits being one
<         and the Count being zero, it discards all cached negative
<         replies for that Data Label. A combined flush positive and
<         negative can be flooded by having all of the F (flood), P
<         (positive), and N (negative) bits (see Section 3.3.1) set to one
<         and the Count field zero resulting in the discard of all
<         positive and negative cached information for the Data Label.
< 
<      2. If method 2 is being followed, then a TRILL switch floods
<         address specific positive Update Messages when data that might
<         be cached by a querying TRILL switch is changed or deleted and
<         floods address specific negative Update Messages when such
<         information is added to.  Such messages are sent as RBridge
<         Channel messages. The F bit will be one; however, the Count
<         field will be non-zero and either the P or N bit, but not both,
<         will be one.  There are actually four possible message types
<         that can be flooded:
< 
<         2.a If data that might still be cached is updated:
<                 An unsolicited Update Message is sent with the P flag
<             set and the Err field zero. On receipt, the addresses in the
<             RESPONSE Records are compared to the addresses for which the
<             receiving TRILL switch is holding cached positive
<             information from that server. If they match, the cached
<             information is updated.
< 
<         2.b If data that might still be cached is deleted:
<                 An unsolicited Update Message is sent with the P flag
<             set and the Err field non-zero giving the error that would
<             now be encountered in attempting to pull information for the
<             relevant address from the Pull Directory server. In this
<             non-zero Err field case, the RESPONSE Record(s) differ from
<             non-zero Err Reply Message RESPONSE Records in that they do
<             include an interface address set.  Any cached positive
<             information for the addresses given is deleted and the
<             negative response is cached as per the lifetime given.
< 
<         2.c If data for an address for which a negative response was
<             sent is added, so that negative response that might still be
<             cached is now incorrect:
<                 An unsolicited Update Message is sent with the N flag
<             set to one and the Err field zero. The addresses in the
<             RESPONSE Records are compared to the addresses for which the
<             receiving TRILL switch is holding cached negative
<             information from that server; if they match, the cached
<             negative information is deleted and the positive information
<             provided is cached as per the lifetime given.
< 
<         2.d In the rare case where it is desired to change the lifetime
<             or error associated with negative information that might
<             still be cached:
<                 An unsolicited Update Message is sent with the N flag
<             set to one and the Err field non-zero. As in case 2.b above,
<             the RESPONSE Record(s) give the relevant addresses.  Any
<             cached negative information for the address is updated.
< 
<      3. If method 3 is being followed, the same sort of unsolicited
<         Update Messages are sent as with method 2 above except they are
<         not normally flooded but unicast only to the specific TRILL
<         switches the directory server believes may be holding the cached
<         positive or negative information that needs deletion or
<         updating. However, a Pull Directory server MAY flood unsolicited
<         updates under method 3, for example if it determines that a
<         sufficiently large fraction of the TRILL switches in some Data
<         Label are requesters that need to be updated so that flooding is
<         more efficient that unicast.
---
>       1.  If method 1, the least detailed method, is being followed,
>           then when any Pull Directory information in a Data Label is
>           changed or deleted and there are outstanding cached positive
>           data response(s), an all-addresses flush positive data Update
>           Message is flooded within that Data Label as an RBridge
>           Channel Message.  Similarly if data is added and there are
>           outstanding cached negative responses, an all-addresses flush
>           negative message is similarly flooded.  The Count field is
>           zero in an Update Message indicates "all-addresses".  On
>           receiving an all-addresses flooded flush positive Update from
>           a Pull Directory server it has used, indicated by the F and P
>           bits being one and the Count being zero, a TRILL switch
>           discards the cached data responses it has for that Data Label.
>           Similarly, on receiving an all addresses flush negative
>           Update, indicated by the F and N bits being one and the Count
>           being zero, it discards all cached negative replies for that
>           Data Label.  A combined flush positive and negative can be
>           flooded by having all of the F (flood), P (positive), and N
>           (negative) bits (see Section 3.3.1) set to one and the Count
>           field zero resulting in the discard of all positive and
>           negative cached information for the Data Label.
> 
>       2.  If method 2 is being followed, then a TRILL switch floods
>           address specific positive Update Messages when data that might
>           be cached by a querying TRILL switch is changed or deleted and
>           floods address specific negative Update Messages when such
>           information is added to.  Such messages are sent as RBridge
>           Channel messages.  The F bit will be one; however, the Count
>           field will be non-zero and either the P or N bit, but not
>           both, will be one.  There are actually four possible message
>           types that can be flooded:
> 
>           2.a If data that might still be cached is updated:
>                   An unsolicited Update Message is sent with the P flag
>                   set and the Err field zero.  On receipt, the addresses
>                    in the
>                  RESPONSE Records are compared to the addresses for
>                  which the receiving TRILL switch is holding cached
>                  positive information from that server.  If they match,
>                  the cached information is updated.
>           2.b If data that might still be cached is deleted:
>                   An unsolicited Update Message is sent with the P flag
> 
>                   set and the Err field non-zero giving the error that
>                   would
>                  now be encountered in attempting to pull information
>                  for the relevant address from the Pull Directory
>                  server.  In this non-zero Err field case, the RESPONSE
>                  Record(s) differ from non-zero Err Reply Message
>                  RESPONSE Records in that they do include an interface
>                  address set.  Any cached positive information for the
>                  addresses given is deleted and the negative response is
>                  cached as per the lifetime given.
>           2.c If data for an address for which a negative response was
>                   sent is added, so that negative response that might
>                   still be cached is now incorrect: An unsolicited
>                   Update Message is sent with the N flag
> 
>                   set to one and the Err field zero.  The addresses in
>                   the
>                  RESPONSE Records are compared to the addresses for
>                  which the receiving TRILL switch is holding cached
>                  negative information from that server; if they match,
>                  the cached negative information is deleted and the
>                  positive information provided is cached as per the
>                  lifetime given.
>           2.d In the rare case where it is desired to change the
>           lifetime
>                   or error associated with negative information that
>                   might still be cached: An unsolicited Update Message
>                   is sent with the N flag
> 
>                   set to one and the Err field non-zero.  As in case 2.b
>                    above,
>                  the RESPONSE Record(s) give the relevant addresses.
>                  Any cached negative information for the address is
>                  updated.
> 
>       3.  If method 3 is being followed, the same sort of unsolicited
>           Update Messages are sent as with method 2 above except they
>           are not normally flooded but unicast only to the specific
>           TRILL switches the directory server believes may be holding
>           the cached positive or negative information that needs
>           deletion or updating.  However, a Pull Directory server MAY
>           flood unsolicited updates under method 3, for example if it
>           determines that a sufficiently large fraction of the TRILL
>           switches in some Data Label are requesters that need to be
>           updated so that flooding is more efficient that unicast.
1277c1323
< 3.3.1 Update Message Format
---
> 3.3.1.  Update Message Format
1290c1336
<    Update Messages are initiated by a Pull Directory server. The
---
>    Update Messages are initiated by a Pull Directory server.  The
1292,1293c1338,1339
<    Directory server. This update Sequence number space is different from
<    the Sequence number space used in a Query and the corresponding
---
>    Directory server.  This update Sequence number space is different
>    from the Sequence number space used in a Query and the corresponding
1310c1356
<    R: Reserved. MUST be sent as zero and ignored on receipt
---
>    R: Reserved.  MUST be sent as zero and ignored on receipt
1317c1363
< 3.3.2 Acknowledge Message Format
---
> 3.3.2.  Acknowledge Message Format
1321c1367
<    rate limiting. It is formatted as a Response Message but the Type is
---
>    rate limiting.  It is formatted as a Response Message but the Type is
1338c1384
< 3.4 Summary of Records Formats in Messages
---
> 3.4.  Summary of Records Formats in Messages
1342c1388
<    structures under different circumstances, as summarized below. The
---
>    structures under different circumstances, as summarized below.  The
1344c1390
<    below. "IA APPsub-TLV value" means the value part of the IA APPsub-
---
>    below.  "IA APPsub-TLV value" means the value part of the IA APPsub-
1366c1412
< 3.5 End Stations and Pull Directories
---
> 3.5.  End Stations and Pull Directories
1377c1423
<    specified in Section 3.5.3. In these cases, the edge RBridge(s) and
---
>    specified in Section 3.5.3.  In these cases, the edge RBridge(s) and
1379c1425
<    control information. This is accomplished with the TRILL ES-IS
---
>    control information.  This is accomplished with the TRILL ES-IS
1382c1428
< 3.5.1 Pull Directory Hosted on an End Station
---
> 3.5.1.  Pull Directory Hosted on an End Station
1385,1386c1431,1432
<    supported. In that case, one or more TRILL switches must act as
<    indirect Pull Directory servers. That is, they host a Pull Directory
---
>    supported.  In that case, one or more TRILL switches must act as
>    indirect Pull Directory servers.  That is, they host a Pull Directory
1392,1393c1438,1440
<    connected by the co-located Pull Directory client. (Direct connection
<    means a connection not involving any intermediate TRILL switches.)
---
>    connected by the co-located Pull Directory client.  (Direct
>    connection means a connection not involving any intermediate TRILL
>    switches.)
1418c1465
<                  Figure 2. End Station Pull Directory Example
---
>                Figure 2: End Station Pull Directory Example
1428c1475
<    with point-to-point Ethernet links to RB1 and RB2). There could be
---
>    with point-to-point Ethernet links to RB1 and RB2).  There could be
1430,1431c1477,1478
<    servers. Furthermore, there could be one or more than two end
<    stations with Pull Directory servers on them. Each TRILL switch
---
>    servers.  Furthermore, there could be one or more than two end
>    stations with Pull Directory servers on them.  Each TRILL switch
1444c1491
<    based. When an indirect Pull Directory server receives Update
---
>    based.  When an indirect Pull Directory server receives Update
1454,1459c1501,1506
<    withdrawing the information. For this reason, indirect Pull Directory
<    servers may wish to query multiple sources, if available, and cache
<    multiple copies of returned information from those multiple sources.
<    Then if one end station source becomes inaccessible or withdraws the
<    information but the indirect Pull Directory server has the
<    information from another source, it need not originate Updates.
---
>    withdrawing the information.  For this reason, indirect Pull
>    Directory servers may wish to query multiple sources, if available,
>    and cache multiple copies of returned information from those multiple
>    sources.  Then if one end station source becomes inaccessible or
>    withdraws the information but the indirect Pull Directory server has
>    the information from another source, it need not originate Updates.
1461c1508
< 3.5.2 Use of Pull Directory by End Stations
---
> 3.5.2.  Use of Pull Directory by End Stations
1464c1511
<    and [SmartEN], may need to access directory information. How edge
---
>    and [SmartEN], may need to access directory information.  How edge
1475c1522
< 3.5.3 Native Pull Directory Messages
---
> 3.5.3.  Native Pull Directory Messages
1480,1484c1527,1532
<    inter-RBridge Pull Directory RBridge Channel messages. The Outer.VLAN
<    ID used is the TRILL ES-IS Designated VLAN (see Section 5) on the
<    link to the end station. Since there is no TRILL Header or inner Data
<    Label for native RBridge Channel messages, that information is added
<    to the Pull Directory message header as specified below.
---
>    inter-RBridge Pull Directory RBridge Channel messages.  The
>    Outer.VLAN ID used is the TRILL ES-IS Designated VLAN (see Section 5)
>    on the link to the end station.  Since there is no TRILL Header or
>    inner Data Label for native RBridge Channel messages, that
>    information is added to the Pull Directory message header as
>    specified below.
1507c1555
<    version. This Data Label appears in a native Query Message, to be
---
>    version.  This Data Label appears in a native Query Message, to be
1509c1557
<    Update to be reflected in an Acknowledge Message. Since the
---
>    Update to be reflected in an Acknowledge Message.  Since the
1513c1561
< 3.6 Pull Directory Message Errors
---
> 3.6.  Pull Directory Message Errors
1528,1536c1576,1584
<    any successful non-erroneous QUERY Records. If multiple QUERY Records
<    in a Query Message have different errors, they MUST be reported in
<    separate Response Messages. If multiple QUERY Records in a Query
<    Message have the same error, this error response MAY be reported in
<    one or multiple Response Messages.  In an error Response Message, the
<    QUERY Record or Records being responded to appear, expanded by the
<    Lifetime for which the server thinks the error might persist (usually
<    2**16-1 which indicates indefinitely) and with their Index inserted,
<    as the RESPONSE Record or Records.
---
>    any successful non-erroneous QUERY Records.  If multiple QUERY
>    Records in a Query Message have different errors, they MUST be
>    reported in separate Response Messages.  If multiple QUERY Records in
>    a Query Message have the same error, this error response MAY be
>    reported in one or multiple Response Messages.  In an error Response
>    Message, the QUERY Record or Records being responded to appear,
>    expanded by the Lifetime for which the server thinks the error might
>    persist (usually 2**16-1 which indicates indefinitely) and with their
>    Index inserted, as the RESPONSE Record or Records.
1540c1588
<    acknowledgment of any non-erroneous RESPONSE Records. If multiple
---
>    acknowledgment of any non-erroneous RESPONSE Records.  If multiple
1542c1590
<    reported in separate Acknowledge Messages. If multiple RESPONSE
---
>    reported in separate Acknowledge Messages.  If multiple RESPONSE
1551,1553c1599,1601
<    Message level errors. Err values 128 through 254 are available for
<    encoding QUERY or RESPONSE Record level errors. The SubErr field is
<    available for providing more detail on errors. The meaning of a
---
>    Message level errors.  Err values 128 through 254 are available for
>    encoding QUERY or RESPONSE Record level errors.  The SubErr field is
>    available for providing more detail on errors.  The meaning of a
1556c1604
< 3.6.1 Error Codes
---
> 3.6.1.  Error Codes
1583c1631
< 3.6.2 Sub-Errors Under Error Codes 1 and 3
---
> 3.6.2.  Sub-Errors Under Error Codes 1 and 3
1596c1644
< 3.6.3 Sub-Errors Under Error Codes 128 and 131
---
> 3.6.3.  Sub-Errors Under Error Codes 128 and 131
1612c1660
< 3.7 Additional Pull Details
---
> 3.7.  Additional Pull Details
1622c1670
<    primary directory server. See discussion of primary to secondary
---
>    primary directory server.  See discussion of primary to secondary
1625c1673
< 3.8 The No Data Flag
---
> 3.8.  The No Data Flag
1631c1679
<    multi-destination traffic in those Data Labels. However, with Pull
---
>    multi-destination traffic in those Data Labels.  However, with Pull
1638c1686
<    Data" (NOD) bit to one (see Section 7.3). This means that data on a
---
>    Data" (NOD) bit to one (see Section 7.3).  This means that data on a
1652,1658c1700,1708
<    multi-destination traffic in some Data Labels would be a TRILL switch
<    that does not offer end station service for any of the Data Labels
<    for which it is serving as a directory and is either
<       -  a Pull Directory and/or
<       -  a Push Directory for one or more Data Labels where all of the
<          ESADI traffic for those Data Labels will be handled by unicast
<          ESADI [RFC7357].
---
> 
>   multi-destination traffic in some Data Labels would be a TRILL switch
>   that does not offer end station service for any of the Data Labels for
>   which it is serving as a directory and is either
> 
>    -  a Pull Directory and/or
>    -  a Push Directory for one or more Data Labels where all of the
>       ESADI traffic for those Data Labels will be handled by unicast
>       ESADI [RFC7357].
1666c1716
< 3.9 Pull Directory Service Configuration
---
> 3.9.  Pull Directory Service Configuration
1669c1719
<    available for controlling Pull Directory service behavior. In
---
>    available for controlling Pull Directory service behavior.  In
1672c1722
<    Directory query it causes. The default such mapping depends on the
---
>    Directory query it causes.  The default such mapping depends on the
1682c1732
<      DirRespMaxPriority    6               3.2.2.1         3
---
>       DirRespMaxPriority      6 3.2.2.1 3
1689c1739
<      DirAckMaxPriority     5               3.3.2           4
---
>       DirAckMaxPriority       5 3.3.2 4
1705c1755
< 4. Directory Use Strategies and Push-Pull Hybrids
---
> 4.  Directory Use Strategies and Push-Pull Hybrids
1709c1759
<    under all those Data Labels can be a challenge. This is especially
---
>    under all those Data Labels can be a challenge.  This is especially
1716c1766
<    Data Labels or addresses within a Data Label. It is the network
---
>    Data Labels or addresses within a Data Label.  It is the network
1724c1774
<    pushed down to the data center gateway routers. For hosts in other
---
>    pushed down to the data center gateway routers.  For hosts in other
1733c1783
<    few hosts in that Data Label. In that case, the address information
---
>    few hosts in that Data Label.  In that case, the address information
1739c1789
<    and Pull for others. In fact, different TRILL switches can even be
---
>    and Pull for others.  In fact, different TRILL switches can even be
1742c1792
<    Directory services are available for that Data Label. And there can
---
>    Directory services are available for that Data Label.  And there can
1746c1796
<    for making use of directory assistance. A few suggestions are given
---
>    for making use of directory assistance.  A few suggestions are given
1750,1759c1800,1810
< 	 information from a complete Push Directory server, there will be a
< 	 period of time when it first comes up before the information it
< 	 holds is complete.  Or, it could be that the only Push Directories
< 	 that can push information to it are incomplete or that they are
< 	 just starting and may not yet have pushed the entire directory.
< 
< 	 Thus, it is RECOMMENDED that all TRILL switches have a strategy
< 	 for dealing with the situation where they do not have complete
< 	 directory information. Examples are to send a Pull Directory query
< 	 or to revert to [RFC6325] behavior.
---
>          information from a complete Push Directory server, there will
>          be a period of time when it first comes up before the
>          information it holds is complete.  Or, it could be that the
>          only Push Directories that can push information to it are
>          incomplete or that they are just starting and may not yet have
>          pushed the entire directory.
> 
>          Thus, it is RECOMMENDED that all TRILL switches have a strategy
>          for dealing with the situation where they do not have complete
>          directory information.  Examples are to send a Pull Directory
>          query or to revert to [RFC6325] behavior.
1762,1774c1813,1826
< 	 seeking directory information, a choice needs to be made as to
< 	 what to do if it does not already have the directory information
< 	 it needs. In particular, it could (1) immediately flood the TRILL
< 	 Data packet resulting from ingressing X in parallel with seeking
< 	 the directory information, (2) flood that TRILL Data packet after
< 	 a delay, if it fails to obtain the directory information, or (3)
< 	 discard X if it fails to obtain the information. The choice might
< 	 depend on the priority of frame X since the higher that priority
< 	 typically the more urgent the frame is and the greater the
< 	 probability of harm in delaying it. If a Pull Directory request is
< 	 sent, it is RECOMMENDED that its priority be derived from the
< 	 priority of the frame X with the derived priority configurable and
< 	 having the following defaults:
---
>          seeking directory information, a choice needs to be made as to
>          what to do if it does not already have the directory
>          information it needs.  In particular, it could (1) immediately
>          flood the TRILL Data packet resulting from ingressing X in
>          parallel with seeking the directory information, (2) flood that
>          TRILL Data packet after a delay, if it fails to obtain the
>          directory information, or (3) discard X if it fails to obtain
>          the information.  The choice might depend on the priority of
>          frame X since the higher that priority typically the more
>          urgent the frame is and the greater the probability of harm in
>          delaying it.  If a Pull Directory request is sent, it is
>          RECOMMENDED that its priority be derived from the priority of
>          the frame X with the derived priority configurable and having
>          the following defaults:
1788,1791c1840,1844
< 	 NOTE: The odd looking numbers towards the bottom of the columns
< 	 above are because priority 1 is lower than priority zero. That is
< 	 to say, the values in the first column are in priority order. They
< 	 will look more logical if you think of "0" as being "1 1/2".
---
>          NOTE: The odd looking numbers towards the bottom of the columns
>          above are because priority 1 is lower than priority zero.  That
>          is to say, the values in the first column are in priority
>          order.  They will look more logical if you think of "0" as
>          being "1 1/2".
1798c1851
< 5. TRILL ES-IS
---
> 5.  TRILL ES-IS
1803c1856
<    stations on that link. Support of TRILL ES-IS is generally optional
---
>    stations on that link.  Support of TRILL ES-IS is generally optional
1805c1858
<    required to support certain features. As of the date of this
---
>    required to support certain features.  As of the date of this
1812c1865
<    uses. The advantages of TRILL ES-IS over simply making an "end
---
>    uses.  The advantages of TRILL ES-IS over simply making an "end
1821c1874
< 5.1 PDUs and System IDs
---
> 5.1.  PDUs and System IDs
1825c1878
<    address (see Section 7.6). This use of a different multicast address
---
>    address (see Section 7.6).  This use of a different multicast address
1830c1883
<    port MAC addresses in their place. This is convenient since MAC
---
>    port MAC addresses in their place.  This is convenient since MAC
1832,1835c1885,1888
<    System IDs. Logically TRILL IS-IS operates between the TRILL switches
<    in a TRILL campus as identified by System ID while TRILL ES-IS
<    operates between Ethernet ports on an Ethernet link (which may be a
<    bridged LAN) as identified by MAC address [RFC6325].
---
>    System IDs.  Logically TRILL IS-IS operates between the TRILL
>    switches in a TRILL campus as identified by System ID while TRILL ES-
>    IS operates between Ethernet ports on an Ethernet link (which may be
>    a bridged LAN) as identified by MAC address [RFC6325].
1841c1894
< 5.2 Adjacency, DRB Election, Hellos, TLVs, Etc.
---
> 5.2.  Adjacency, DRB Election, Hellos, TLVs, Etc.
1845c1898
<    The DRB specifies an ES-IS Designated VLAN for the link. This
---
>    The DRB specifies an ES-IS Designated VLAN for the link.  This
1861c1914
<    is received in TRILL ES-IS it is ignored. (The Appointed Forwarders
---
>    is received in TRILL ES-IS it is ignored.  (The Appointed Forwarders
1873c1926
<    sent as zero and ignored on receipt. In addition, the AF and TR flag
---
>    sent as zero and ignored on receipt.  In addition, the AF and TR flag
1877c1930
< 5.3 Link State
---
> 5.3.  Link State
1881c1934
<    [RFC7356]). In particular, the end station Ethernet ports supporting
---
>    [RFC7356]).  In particular, the end station Ethernet ports supporting
1884c1937
<    them). TLVs and sub-TLVs that would otherwise be sent in TRILL IS-IS
---
>    them).  TLVs and sub-TLVs that would otherwise be sent in TRILL IS-IS
1887c1940
< 6. Security Considerations
---
> 6.  Security Considerations
1891c1944
< 6.1 Directory Information Security
---
> 6.1.  Directory Information Security
1894c1947
<    threats including those below. Directory servers therefore need to
---
>    threats including those below.  Directory servers therefore need to
1910c1963
<    on. Parties authorized to modify directory data can violate
---
>    on.  Parties authorized to modify directory data can violate
1913c1966
< 6.2 Directory Confidentiality and Privacy
---
> 6.2.  Directory Confidentiality and Privacy
1916c1969
<    RBridges deal almost exclusively with MAC addresses. Use of
---
>    RBridges deal almost exclusively with MAC addresses.  Use of
1918,1921c1971,1974
<    actively with IP addresses as well. But RBridges in any case would be
<    exposed to plain text ARP/ND/SEND/IP traffic and so can see all this
<    addressing meta-data. So this more explicit dealing with IP addresses
<    has little effect on the privacy of end station traffic.
---
>    actively with IP addresses as well.  But RBridges in any case would
>    be exposed to plain text ARP/ND/SEND/IP traffic and so can see all
>    this addressing meta-data.  So this more explicit dealing with IP
>    addresses has little effect on the privacy of end station traffic.
1926c1979
< 6.3 Directory Message Security Considerations
---
> 6.3.  Directory Message Security Considerations
1930,1931c1983,1984
<    the widely implemented and deployed IS-IS PDU security. This
<    mechanism provides authentication and integrity protection. See
---
>    the widely implemented and deployed IS-IS PDU security.  This
>    mechanism provides authentication and integrity protection.  See
1936c1989
<    RBridge or native RBridge Channel messages [RFC7178]. Such messages
---
>    RBridge or native RBridge Channel messages [RFC7178].  Such messages
1939c1992
<    protections. At the time of this RFC, these security mechanisms are
---
>    protections.  At the time of this RFC, these security mechanisms are
1942c1995
< 7. IANA Considerations
---
> 7.  IANA Considerations
1946c1999
< 7.1 ESADI-Parameter Data Extensions
---
> 7.1.  ESADI-Parameter Data Extensions
1963c2016
<    [RFC7357], by one byte as show below. Therefore [this document]
---
>    [RFC7357], by one byte as show below.  Therefore [this document]
1988,1989c2041,2042
<    Section 2.3. If the PushDirPriority field is not present (Length = 3)
<    it is treated as if it were 0x3F. 0x3F is also the value used and
---
>    Section 2.3.  If the PushDirPriority field is not present (Length =
>    3) it is treated as if it were 0x3F. 0x3F is also the value used and
1993c2046
< 7.2 RBridge Channel Protocol Numbers
---
> 7.2.  RBridge Channel Protocol Numbers
1998c2051
<    Description is "Pull Directory Services". Reference is [this
---
>    Description is "Pull Directory Services".  Reference is [this
2001c2054
< 7.3 The Pull Directory (PUL) and No Data (NOD) Bits
---
> 7.3.  The Pull Directory (PUL) and No Data (NOD) Bits
2006c2059
<    [RFC7176] to indicate Pull Directory server (PUL). This bit is to be
---
>    [RFC7176] to indicate Pull Directory server (PUL).  This bit is to be
2014c2067
<    indicate No Data (NOD, see Section 3.8). This bit is to be added,
---
>    indicate No Data (NOD, see Section 3.8).  This bit is to be added,
2022c2075
<       Registry:  Interested BLANs Flag Bits
---
>       Registry:     Interested BLANs Flag Bits
2036c2089
< 7.4 TRILL Pull Directory QTYPEs
---
> 7.4.  TRILL Pull Directory QTYPEs
2047c2100
< 7.5 Pull Directory Error Code Registries
---
> 7.5.  Pull Directory Error Code Registries
2055,2057c2108,2109
<       Name: TRILL Pull Directory Errors
<       Registration Procedure: IETF Review
<       Reference: [this document]
---
>       Name: TRILL Pull Directory Errors Registration Procedure: IETF
>       Review Reference: [this document]
2063,2064c2115,2116
<          Registration Procedure: Expert Review
<          Reference: [this document]
---
>          Registration Procedure: Expert Review Reference: [this
>          document]
2070,2071c2122,2123
<          Registration Procedure: Expert Review
<          Reference: [this document]
---
>          Registration Procedure: Expert Review Reference: [this
>          document]
2075c2127
< 7.6 TRILL-ES-IS MAC Address
---
> 7.6.  TRILL-ES-IS MAC Address
2079,2080c2131,2132
<    IANA web page [value 01-80-C2-00-00-47 recommended]. Description is
<    "TRILL-ES-IS". Reference is [this document].
---
>    IANA web page [value 01-80-C2-00-00-47 recommended].  Description is
>    "TRILL-ES-IS".  Reference is [this document].
2082c2134
< Normative References
---
> 8.  References
2084,2085c2136
<    [RFC826]  Plummer, D., "An Ethernet Address Resolution Protocol",
<          RFC 826, November 1982.
---
> 8.1.  References
2087,2089c2138,2147
<    [RFC903]  Finlayson, R., Mann, T., Mogul, J., and M. Theimer, "A
<          Reverse Address Resolution Protocol", STD 38, RFC 903, June
<          1984.
---
>    [RFC0826]  Plummer, D., "Ethernet Address Resolution Protocol: Or
>               Converting Network Protocol Addresses to 48.bit Ethernet
>               Address for Transmission on Ethernet Hardware", STD 37,
>               RFC 826, DOI 10.17487/RFC0826, November 1982,
>               <http://www.rfc-editor.org/info/rfc826>.
> 
>    [RFC0903]  Finlayson, R., Mann, T., Mogul, J., and M. Theimer, "A
>               Reverse Address Resolution Protocol", STD 38, RFC 903,
>               DOI 10.17487/RFC0903, June 1984,
>               <http://www.rfc-editor.org/info/rfc903>.
2092c2150,2152
<          Requirement Levels", BCP 14, RFC 2119, March 1997
---
>               Requirement Levels", BCP 14, RFC 2119,
>               DOI 10.17487/RFC2119, March 1997,
>               <http://www.rfc-editor.org/info/rfc2119>.
2095c2155,2157
<          "SEcure Neighbor Discovery (SEND)", RFC 3971, March 2005.
---
>               "SEcure Neighbor Discovery (SEND)", RFC 3971,
>               DOI 10.17487/RFC3971, March 2005,
>               <http://www.rfc-editor.org/info/rfc3971>.
2098,2099c2160,2162
<          "Neighbor Discovery for IP version 6 (IPv6)", RFC 4861,
<          September 2007.
---
>               "Neighbor Discovery for IP version 6 (IPv6)", RFC 4861,
>               DOI 10.17487/RFC4861, September 2007,
>               <http://www.rfc-editor.org/info/rfc4861>.
2102c2165,2166
<          Authentication", RFC 5304, October 2008.
---
>               Authentication", RFC 5304, DOI 10.17487/RFC5304, October
>               2008, <http://www.rfc-editor.org/info/rfc5304>.
2105,2109c2169,2175
<          and M. Fanto, "IS-IS Generic Cryptographic Authentication", RFC
<          5310, February 2009.
< 
<    [RFC6165]  Banerjee, A. and D. Ward, "Extensions to IS-IS for
<          Layer-2 Systems", RFC 6165, April 2011.
---
>               and M. Fanto, "IS-IS Generic Cryptographic
>               Authentication", RFC 5310, DOI 10.17487/RFC5310, February
>               2009, <http://www.rfc-editor.org/info/rfc5310>.
> 
>    [RFC6165]  Banerjee, A. and D. Ward, "Extensions to IS-IS for Layer-2
>               Systems", RFC 6165, DOI 10.17487/RFC6165, April 2011,
>               <http://www.rfc-editor.org/info/rfc6165>.
2112,2113c2178,2180
<          Ghanwani, "Routing Bridges (RBridges): Base Protocol
<          Specification", RFC 6325, July 2011.
---
>               Ghanwani, "Routing Bridges (RBridges): Base Protocol
>               Specification", RFC 6325, DOI 10.17487/RFC6325, July 2011,
>               <http://www.rfc-editor.org/info/rfc6325>.
2116,2122c2183,2191
<          IETF Protocol and Documentation Usage for IEEE 802 Parameters",
<          BCP 141, RFC 7042, October 2013.
< 
<    [RFC7172]  Eastlake 3rd, D., Zhang, M., Agarwal, P., Perlman, R.,
<          and D. Dutt, "Transparent Interconnection of Lots of Links
<          (TRILL): Fine-Grained Labeling", RFC 7172, May 2014,
<          <http://www.rfc-editor.org/info/rfc7172>.
---
>               IETF Protocol and Documentation Usage for IEEE 802
>               Parameters", BCP 141, RFC 7042, DOI 10.17487/RFC7042,
>               October 2013, <http://www.rfc-editor.org/info/rfc7042>.
> 
>    [RFC7172]  Eastlake 3rd, D., Zhang, M., Agarwal, P., Perlman, R., and
>               D. Dutt, "Transparent Interconnection of Lots of Links
>               (TRILL): Fine-Grained Labeling", RFC 7172,
>               DOI 10.17487/RFC7172, May 2014,
>               <http://www.rfc-editor.org/info/rfc7172>.
2125,2132c2194,2202
<          D., and A. Banerjee, "Transparent Interconnection of Lots of
<          Links (TRILL) Use of IS-IS", RFC 7176, May 2014,
<          <http://www.rfc-editor.org/info/rfc7176>.
< 
<    [RFC7177]  Eastlake 3rd, D., Perlman, R., Ghanwani, A., Yang, H.,
<          and V. Manral, "Transparent Interconnection of Lots of Links
<          (TRILL): Adjacency", RFC 7177, DOI 10.17487/RFC7177, May 2014,
<          <http://www.rfc-editor.org/info/rfc7177>.
---
>               D., and A. Banerjee, "Transparent Interconnection of Lots
>               of Links (TRILL) Use of IS-IS", RFC 7176,
>               DOI 10.17487/RFC7176, May 2014,
>               <http://www.rfc-editor.org/info/rfc7176>.
> 
>    [RFC7177]  Eastlake 3rd, D., Perlman, R., Ghanwani, A., Yang, H., and
>               V. Manral, "Transparent Interconnection of Lots of Links
>               (TRILL): Adjacency", RFC 7177, DOI 10.17487/RFC7177, May
>               2014, <http://www.rfc-editor.org/info/rfc7177>.
2135,2137c2205,2208
<          Ward, "Transparent Interconnection of Lots of Links (TRILL):
<          RBridge Channel Support", RFC 7178, May 2014, <http://www.rfc-
<          editor.org/info/rfc7178>.
---
>               Ward, "Transparent Interconnection of Lots of Links
>               (TRILL): RBridge Channel Support", RFC 7178,
>               DOI 10.17487/RFC7178, May 2014,
>               <http://www.rfc-editor.org/info/rfc7178>.
2140,2141c2211,2213
<          Scope Link State PDUs (LSPs)", RFC 7356, DOI 10.17487/RFC7356,
<          September 2014, <http://www.rfc-editor.org/info/rfc7356>.
---
>               Scope Link State PDUs (LSPs)", RFC 7356,
>               DOI 10.17487/RFC7356, September 2014,
>               <http://www.rfc-editor.org/info/rfc7356>.
2144,2147c2216,2219
<          Stokes, "Transparent Interconnection of Lots of Links (TRILL):
<          End Station Address Distribution Information (ESADI) Protocol",
<          RFC 7357, September 2014, <http://www.rfc-
<          editor.org/info/rfc7357>.
---
>               Stokes, "Transparent Interconnection of Lots of Links
>               (TRILL): End Station Address Distribution Information
>               (ESADI) Protocol", RFC 7357, DOI 10.17487/RFC7357,
>               September 2014, <http://www.rfc-editor.org/info/rfc7357>.
2150,2153c2222,2225
<          Ghanwani, A., and S. Gupta, "Transparent Interconnection of
<          Lots of Links (TRILL): Clarifications, Corrections, and
<          Updates", RFC 7780, DOI 10.17487/RFC7780, February 2016,
<          <http://www.rfc-editor.org/info/rfc7780>.
---
>               Ghanwani, A., and S. Gupta, "Transparent Interconnection
>               of Lots of Links (TRILL): Clarifications, Corrections, and
>               Updates", RFC 7780, DOI 10.17487/RFC7780, February 2016,
>               <http://www.rfc-editor.org/info/rfc7780>.
2156,2162c2228,2235
<          Interconnection of Lots of Links (TRILL): Interface Addresses
<          APPsub-TLV", RFC 7961, DOI 10.17487/RFC7961, August 2016,
<          <http://www.rfc-editor.org/info/rfc7961>.
< 
<    [rfc6439bis]  Eastlake, D., Li, Y., Umair, M., Banerjee, A., and F. Hu,
<          "Routing Bridges (RBridges): Appointed Forwarders", draft-ietf-
<          trill-rfc6439bis, work in progress.
---
>               Interconnection of Lots of Links (TRILL): Interface
>               Addresses APPsub-TLV", RFC 7961, DOI 10.17487/RFC7961,
>               August 2016, <http://www.rfc-editor.org/info/rfc7961>.
> 
>    [rfc6439bis]
>               Eastlake, D., Li, Y., Umair, M., Banerjee, A., and F. Hu,
>               "Routing Bridges (RBridges): Appointed Forwarders", draft-
>               ietf-trill-rfc6439bis (work in progress).
2164c2237
< Informational References
---
> 8.2.  References
2167,2168c2240,2242
<          Gashinsky, "Directory Assistance Problem and High-Level Design
<          Proposal", RFC 7067, November 2013.
---
>               Gashinsky, "Directory Assistance Problem and High-Level
>               Design Proposal", RFC 7067, DOI 10.17487/RFC7067, November
>               2013, <http://www.rfc-editor.org/info/rfc7067>.
2171,2189c2245,2266
<          Interconnection of Lots of Links (TRILL): RBridge Channel
<          Header Extension", RFC 7978, DOI 10.17487/RFC7978, September
<          2016, <http://www.rfc-editor.org/info/rfc7978>.
< 
<    [ARPND]  Li, Y., Eastlake, D., Dunbar, L., Perlman, R., and I. Gashinsky,
<          "TRILL: ARP/ND Optimization", draft-ietf-trill-arp-
<          optimization, work in progress.
< 
<    [DirAsstEncap]  Dunbar, L., Eastlake, D., Perlman, R., and I. Gashingksy,
<          "Directory Assisted TRILL Encapsulation", draft-ietf-trill-
<          directory-assisted-encap, work in progress.
< 
<    [SmartEN]  Perlman, R., Hu, F., Eastlake, D., Krupakaran, K., and T. Liao,
<          "TRILL Smart Endnodes", draft-ietf-trill-smart-endnodes",
<          draft-ietf-trill-smart-endnodes, work in progress.
< 
<    [X.233]  "ITU-T Recommendation X.233: Protocol for providing the
<          connectionless-mode network service: Protocol specification",
<          International Telecommunications Union, August 1997
---
>               Interconnection of Lots of Links (TRILL): RBridge Channel
>               Header Extension", RFC 7978, DOI 10.17487/RFC7978,
>               September 2016, <http://www.rfc-editor.org/info/rfc7978>.
> 
>    [ARPND]    Li, Y., Eastlake, D., Dunbar, L., Perlman, R., and I.
>               Gashinsky, "TRILL: ARP/ND Optimization", draft-ietf-trill-
>               arp-optimization (work in progress).
> 
>    [DirAsstEncap]
>               Dunbar, L., Eastlake, D., Perlman, R., and I. Gashingksy,
>               "Directory Assisted TRILL Encapsulation", draft-ietf-
>               trill-directory-assisted-encap (work in progress).
> 
>    [SmartEN]  Perlman, R., Hu, F., Eastlake, D., Krupakaran, K., and T.
>               Liao, "TRILL Smart Endnodes", draft-ietf-trill-smart-
>               endnodes", draft-ietf-trill-smart-endnodes (work in
>               progress).
> 
>    [X.233]    "ITU-T Recommendation X.233: Protocol for providing the
>               connectionless-mode network service: Protocol
>               specification", International Telecommunications Union,
>               August 1997.
2200c2277
<    The document was prepared in raw nroff. All macros used were defined
---
>    The document was prepared in raw nroff.  All macros used were defined
2202a2280,2310
> Disclaimer, and Additional IPR Provisions
> 
>    Copyright (c) 2017 IETF Trust and the persons identified as the
>    document authors.  All rights reserved.
> 
>    This document is subject to BCP 78 and the IETF Trust's Legal
>    Provisions Relating to IETF Documents (<http://trustee.ietf.org/
>    license-info>) in effect on the date of publication of this document.
>    Please review these documents carefully, as they describe your rights
>    and restrictions with respect to this document.  Code Components
>    extracted from this document must include Simplified BSD License text
>    as described in Section 4.e of the Trust Legal Provisions and are
>    provided without warranty as described in the Simplified BSD License.
>    The definitive version of an IETF Document is that published by, or
>    under the auspices of, the IETF.  Versions of IETF Documents that are
>    published by third parties, including those that are translated into
>    other languages, should not be considered to be definitive versions
>    of IETF Documents.  The definitive version of these Legal Provisions
>    is that published by, or under the auspices of, the IETF.  Versions
>    of these Legal Provisions that are published by third parties,
>    including those that are translated into other languages, should not
>    be considered to be definitive versions of these Legal Provisions.
>    For the avoidance of doubt, each Contributor to the IETF Standards
>    Process licenses each Contribution that he or she makes as part of
>    the IETF Standards Process to the IETF Trust pursuant to the
>    provisions of RFC 5378.  No language to the contrary, or terms,
>    conditions or rights that differ from or are inconsistent with the
>    rights and licenses granted under RFC 5378, shall have any effect and
>    shall be null and void, whether published or posted by such
>    Contributor, or included with or in such Contribution.
> 
2235,2266d2342
< 
< Copyright, Disclaimer, and Additional IPR Provisions
< 
<    Copyright (c) 2017 IETF Trust and the persons identified as the
<    document authors. All rights reserved.
< 
<    This document is subject to BCP 78 and the IETF Trust's Legal
<    Provisions Relating to IETF Documents
<    (http://trustee.ietf.org/license-info) in effect on the date of
<    publication of this document. Please review these documents
<    carefully, as they describe your rights and restrictions with respect
<    to this document. Code Components extracted from this document must
<    include Simplified BSD License text as described in Section 4.e of
<    the Trust Legal Provisions and are provided without warranty as
<    described in the Simplified BSD License.  The definitive version of
<    an IETF Document is that published by, or under the auspices of, the
<    IETF. Versions of IETF Documents that are published by third parties,
<    including those that are translated into other languages, should not
<    be considered to be definitive versions of IETF Documents. The
<    definitive version of these Legal Provisions is that published by, or
<    under the auspices of, the IETF. Versions of these Legal Provisions
<    that are published by third parties, including those that are
<    translated into other languages, should not be considered to be
<    definitive versions of these Legal Provisions.  For the avoidance of
<    doubt, each Contributor to the IETF Standards Process licenses each
<    Contribution that he or she makes as part of the IETF Standards
<    Process to the IETF Trust pursuant to the provisions of RFC 5378. No
<    language to the contrary, or terms, conditions or rights that differ
<    from or are inconsistent with the rights and licenses granted under
<    RFC 5378, shall have any effect and shall be null and void, whether
<    published or posted by such Contributor, or included with or in such
<    Contribution.
