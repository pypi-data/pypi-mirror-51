.. _chap-quick-start-wumappy:

Getting started
***************

Starting WuMapPy
================

.. |WuMapPy| image:: _static/wumappy.jpg
             :width: 0.5cm
             :alt: wumappy

The :program:`WuMapPy` GUI is developed using a ``Qt binding for Python``. 
It takes advantages of `Qt.py`_ so the software should be compatible with any of the available Qt binding for Python (`PyQt4`_ or `PySide`_ and `PyQt5`_ or `PySide2`_), 
eventhough it has only be test with the PySide bindings so far.

.. _`Qt.py`: https://pypi.org/project/Qt.py/
.. _`PyQt4`: https://www.riverbankcomputing.com/software/pyqt/intro/
.. _`PyQt5`: https://www.riverbankcomputing.com/software/pyqt/intro/
.. _`PySide`: http://eveha-international.com/
.. _`PySide2`: https://www.qt.io/qt-for-python/


To launch the software and display :program:`WuMapPy`'s :ref:`chap-main-window-wumappy`:

* for Python installation type ``wumappy`` as a command in any console: 

    >>>  wumappy
    >>>  WuMapPy
    >>>  python wumappy
    >>>  python - m wumappy

   .. note:: **Windows PATH System variable**

      On :program:`Windows`, if typing wumappy in a command prompt does not bring up the program:
      
      * check that the **PATH System variable** contains the Python scripts path *'..PythonXX\\Scripts'*, (where XX depends on your Python version);

      * Add the path to the PATH variable if necessary;
      * then restart your command prompt and type ``wumappy``.

* for *.msi* installation double-click on the :program:`WuMapPy` shortcut (|WuMapPy|).

.. image:: _static/figMainWindow.png

.. _chap-main-help-wumappy:

Getting help
============

Documentation
+++++++++++++

.. |hlp1| image:: _static/figMainWindowHelpMenu.png
   :width: 8cm
   :align: middle

You can find access :program:`WuMapPy` and :program:`GeophPy`'s documentations in two formats (html or pdf) from :program:`WuMapPy`'s :ref:`chap-main-window-wumappy` help menu.


In this menu, you have also access to the :program:`WuMapPy` and :program:`GeophPy` versions number.

+--------+
| |hlp1| |
+--------+

On :program:`Linux`  operating system, to opening these documentations with the best application, you need, before starting :program:`WuMapPy` application, to write the applications full names to use with html and pdf documents in the "config" file: 

    >>> [MISC]
        html_viewer = none
        pdf_viewer = none

with 'none', the default string, the application launches only the file full name (".../WuMapPy.pdf" for example), and the operating system define which application to execute to opening the documentation file.

.. note::
   
   The "config" file is saved in "~/wumappy" on :program:`Windows`, or "~/.wumappy" on :program:`Linux`  and :program:`Mac OS`, where '~' is the user directory.


Package version
+++++++++++++++

.. |about| image:: _static/figMainWindowHelpAbout.png
   :width: 10cm
   :align: middle

You can acces :program:`WuMapPy`'s version by selecting ``about`` in the the main window's help menu.

+---------+
| |about| |
+---------+



.. _chap-main-settings-wumappy:

GUI Settings
============

You can change the entire GUI :ref:`chap-main-settings-lang-wumappy`, :ref:`chap-main-settings-font-wumappy` and others :ref:`chap-main-settings-misc-wumappy` from :program:`WuMapPy`'s :ref:`Settings <chap-main-settings-wumappy>` menu.

.. |set1| image:: _static/figMainWindowSettingsMenu.png
   :width: 4cm
   :align: middle

+--------+
| |set1| | 
+--------+

.. _chap-main-settings-lang-wumappy:

Language
++++++++

The language descriptions are presents as *.lng* dictionary files in the ``~/wumappy/resources`` directory where ``~`` is the user home directory.
The default builtin language for the Graphic User Interface is English, and it's the only one generated by the code and saved as the *english.lng*. 

This file as the follwing format:

    >>> english
	FILES_ID	Files
	SETTINGS_ID	Settings
	FONT_ID		Font
	MISCSETTINGS_ID	Miscellaneous Settings
	HELP_ID		Help
	ABOUT_ID	About

The first line is the language name, the first column is object identifier (menu name, group box name etc.) and the second the displayed translation. 

You can easily add and use an other language file: duplicate the *english.lng* file as *otherlanguage.lng*, change the language name in the first row and modify the second row with the correct translation in the new language.


The language files in the ``~/wumappy/resources`` directory (like *french.lng* or *spanish.lng* etc.) are automatically detected by :program:`WuMapPy` and become available languages in the :menuselection:`Settings --> Language` menu.

.. |lang1| image:: _static/figLanguageSelectionDlgBox.png
   :width: 5cm
   :align: middle

+---------+
| |lang1| | 
+---------+

.. _chap-main-settings-font-wumappy:

Font
++++

The font type and the font size used in the majority of the windows and dialog boxes can be modified in the :menuselection:`Settings --> Font` menu.

.. |font1| image:: _static/figSelectFontDlgBox.png
   :height: 8cm
   :align: middle

+---------+
| |font1| | 
+---------+

.. _chap-main-settings-misc-wumappy:


Miscellaneous settings
++++++++++++++++++++++

.. |misc1| image:: _static/figMiscellaneousSettingsDlgBox.png
   :width: 5cm
   :align: middle

.. |rt1| image:: _static/figDlgBoxButtonsWithoutRealTimeUpdate1.png
   :width: 5cm
   :align: middle

.. |gpb1| image:: _static/figGroupBoxDlgBox1.png
   :height: 6cm
   :align: middle

.. |gpb2| image:: _static/figGroupBoxDlgBox2.png
   :height: 6cm
   :align: middle

+---------+
| |misc1| | 
+---------+

With this dialog box, it is possible to

- Check/uncheck the flag of *Real time update* after a modification in a dialog box.
  
  If the flag is unchecked, an *Update* button will be displayed in the dialog box and the map *Rendering* tab will be updated only if this *Update* button is clicked.

+-------+
| |rt1| | 
+-------+

- Check/uncheck the flag of *Group Box Format* display style.

  If the flag is unchecked all dialog boxes' tabs will be displayed in the same windows.

  +--------+
  | |gpb1| | 
  +--------+

  If the flag is checked, options will be displayed in different tabs.

  +--------+
  | |gpb2| |
  +--------+

.. note:: **Group Box Format**
   
   If the *Group Box Format* is disable, the dialog boxes with many different tabs may be hard to use.

Opening data files
===================

.. |imprt1| image:: _static/figOpenDataSetMenu.png
   :height: 6cm
   :align: middle

For now, :program:`WuMapPy` reads three different types of data file formats: 

* :ref:`netCDF files <chap-import-from-netCDF-wumappy>` (used as :program:`WuMapPy`'s internal file system) ;
* :ref:`delimiter-separated ASCII files <chap-import-from-ascii-wumappy>`;
* :ref:`Surfer Grid files <chap-import-from-grd-wumappy>`.

  +----------+
  | |imprt1| |
  +----------+

.. _chap-import-from-netCDF-wumappy:

netCDF files
+++++++++++++

:program:`WuMapPy` natively uses a `netCD`_ style format to store the processed dataset.
You can re-open a previously processed data using the `open menu` in the main window :ref:`chap-main-files-wumappy` menu.

.. _`netCD`: https://www.unidata.ucar.edu/software/netcdf/


.. note:: **WuMapPy's netCD format**

    ...To be explicited ...

.. _chap-import-from-grd-wumappy:

Surfer grid
+++++++++++

:program:`WuMapPy` manages :program:`Golden Software Surfer` grid files (:program:`Surfer 7` binary grids, :program:`Surfer 6` binary grids and :program:`Surfer` 6 ASCII grids). 

Use the :menuselection:`Files --> Import --> From GRD Surfer Grid files` menu to import a grid. 
The grid type is automatically determined from the `.grd` file itself.

.. note::

    From `Surfer's website`_: 
       "Surfer Grid files contain grid nodes or grid cells at x,y locations, and these nodes/cells have specific z values associated with them.
       The grid files Surfer supports have evenly-spaced grid nodes/cells, though there are grid files that have uneven spacing. 
       The x,y limits in map units, the grid spacing, and null values are all defined in the grid file."

.. _`Surfer's website`: https://support.goldensoftware.com/hc/en-us/articles/115005530868-What-File-Format-Should-I-Export-from-Surfer-#gridfiles


.. _chap-import-from-ascii-wumappy:

Ascii files
+++++++++++

.. |open0| image:: _static/figOpenDataSetDlgBox0.png
   :height: 8cm
   :align: middle
   
You can import, display and pre-process data in comma-separated values files (CSV), or any other delimiter-separated values files format, from the :menuselection:`Files --> Import --> From ASCII files` menu. 

A file preview allows you to select:

* the file delimiter;
* the columns for X, Y and Z;
* and the number of header lines to ignore.

+---------+
| |open0| | 
+---------+

The *Update* button allows you to preview the effect of the filter before an actual validation when the *real time update* option is switched off.

.. |open1| image:: _static/figOpenDataSetDlgBox1.png
   :height: 6cm
   :align: middle

.. |open2| image:: _static/figOpenDataSetDlgBox2.png
   :height: 6cm
   :align: middle

.. |open3| image:: _static/figOpenDataSetDlgBox3.png
   :height: 6cm
   :align: middle

.. |open4| image:: _static/figOpenDataSetDlgBox4.png
   :height: 6cm
   :align: middle

.. |open5| image:: _static/figOpenDataSetDlgBox5.png
   :height: 6cm
   :align: middle

.. |open6| image:: _static/figOpenDataSetDlgBox6.png
   :height: 6cm
   :align: middle

- File format, Gridding options and Festoon filter tabs.

+---------+---------+
| |open1| | |open2| |
+---------+---------+

- Display options and Median filter options tabs.

+---------+---------+
| |open3| | |open4| |
+---------+---------+

- Histogram and dataset Display tab.

+---------+---------+
| |open5| | |open6| |
+---------+---------+

 
.. _chap-open-geoposet-wumappy:

Open Geoposition Set
++++++++++++++++++++

:program:`WuMapPy` uses Geoposition Set for data georeferencing. You can open and edit them in the GUI. 
Geoposition Sets are simply a set of Ground Control Points (GCPs) associated with a dataset. 
They can be imported from an ascii (`.csv`) file or a shapefile (`.shp`).


.. image:: _static/figOpenGeoPosSet1DlgBox.png

(for more informations, cf. :program:`GeophPy` documentation)

.. note:: **Geoposition Set ascii format**

    A simple semicolon-separated values with following informations, see the example in the ``example files`` directory.

    >>> # Example with GCPs in GPS and local coordinates 
    UTM
    1;745038.191;4656005.727;150;0	
    2;745068.172;4656045.663;150;50	
    3;745028.43;4656076.057;100;50	
    4;744988.466;4656105.978;50;50	
    5;744998.428;4656036.093;100;0
    
    >>> # Example with GCPs in GPS coordinates only
    WGS84
    1;66.84617533;37.74956917;;
    2;66.84649517;37.7489535;;
    3;66.8472475;37.74972867;;
    4;66.84689417;37.7491385;;
    5;66.84691867;37.7491025;;
    6;66.84689083;37.74980083;;
    8;66.84720583;37.74922933;;
    12;66.84760417;37.74967583;;
    13;66.8478755;37.74908767;;
    14;66.84794333;37.7491175;;
    15;66.84815417;37.74870267;;

.. _chap-processing-wumappy:

Processing data
===============

All the different available processing step can be applied to dataset from the :ref:`chap-dataset-window-wumappy`. 

.. |proc| image:: _static/figDataSetWindowProcessing.png
   :height: 8cm
   :align: middle

+--------+
| |proc| |
+--------+

See :ref:`chap-genproc-wumappy`, :ref:`chap-genproc-wumappy` and :ref:`chap-magproc-wumappy` for a list of the differents processing step available.
 

Georeferencing
==============

Georeferencing based on a Geoposition Set can be done from the :ref:`chap-dataset-window-wumappy` if the corresponding Geoposition Set has been loaded.

+---------------------------------------------------------+
|                                                         |
| .. figure:: _static/figDataSetWindowGeoreferencing.png  |
|    :height: 8cm                                         |
|    :align: center                                       |
|                                                         |
+---------------------------------------------------------+

See :ref:`chap-georef-wumappy` for more details.