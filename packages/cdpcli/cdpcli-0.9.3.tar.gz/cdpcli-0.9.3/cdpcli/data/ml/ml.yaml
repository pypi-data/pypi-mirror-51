x-generated: Automatically generated by CDP protoc plugin. Do not edit manually.
swagger: '2.0'
x-endpoint-name: ml
x-products: CDP
x-cdp-releases: PUBLIC
info:
  version: 0.1-SNAPSHOT
  title: Cloudera Machine Learning
  license:
    name: Apache 2.0
  description: Install and manage Cloudera Machine Learning applications.
schemes:
  - https
consumes:
  - application/json
produces:
  - application/json
paths:
  /api/v1/ml/createWorkspace:
    post:
      summary: Create a Cloudera Machine Learning workspace.
      description: Provision a Kubernetes cluster and install the Cloudera Machine Learning application in it.
      operationId: createWorkspace
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateWorkspaceRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/CreateWorkspaceResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/deleteWorkspace:
    post:
      summary: Delete Cloudera Machine Learning Workspace.
      description: Deletes a Cloudera Machine Learning workspace.
      operationId: deleteWorkspace
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/DeleteWorkspaceRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/DeleteWorkspaceResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/grantWorkspaceAccess:
    post:
      summary: GrantWorkspaceAccess Cloudera Machine Learning Workspace.
      description: Grants an AWS user to perform kubernetes operations on a Cloudera Machine Learning workspace via EKS.
      operationId: grantWorkspaceAccess
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/GrantWorkspaceAccessRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/GrantWorkspaceAccessResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/listWorkspaces:
    post:
      summary: List Cloudera Machine Learnings workspaces.
      description: List Cloudera Machine Learnings workspaces.
      operationId: listWorkspaces
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/ListWorkspacesRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/ListWorkspacesResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/revokeWorkspaceAccess:
    post:
      summary: RevokeWorkspaceAccess Cloudera Machine Learning Workspace.
      description: Revokes an AWS user to perform kubernetes operations on a Cloudera Machine Learning workspace via EKS.
      operationId: revokeWorkspaceAccess
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/RevokeWorkspaceAccessRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/RevokeWorkspaceAccessResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/ml/upgradeWorkspace:
    post:
      summary: Upgrade Cloudera Machine Learning workspace.
      description: Upgrades a Cloudera Machine Learning workspace to the latest available version.
      operationId: upgradeWorkspace
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpgradeWorkspaceRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/UpgradeWorkspaceResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
definitions:
  Error:
    type: object
    description: An object returned on an error.
    properties:
      code:
        type: string
        description: The error code.
      message:
        type: string
        description: The error message.
  RootVolume:
    type: object
    description: Configuration for instance root device volume
    properties:
      size:
        type: integer
        format: int64
        description: The volume size in GB.
  Autoscaling:
    type: object
    description: Configuration for instance auto scaling.
    properties:
      enabled:
        type: boolean
        description: The boolean flag to enable the auto scaling.
      maxInstances:
        type: integer
        format: int32
        description: The maximum number of instance for auto scaling.
      minInstances:
        type: integer
        format: int32
        description: The minimum number of instance for auto scaling.
  InstanceGroup:
    type: object
    description: Contains the necessary info for an instance group.
    properties:
      autoscaling:
        description: The auto scaling configuration.
        $ref: '#/definitions/Autoscaling'
      ingressRuless:
        type: array
        items:
          type: string
        description: The networking rules for the ingress.
      instanceCount:
        type: integer
        format: int32
        description: The initial number of instance node.
      instanceTier:
        type: string
        description: The tier of the instance i.e. on-demand/spot.
      instanceType:
        type: string
        description: The cloud provider instance type for the node instance.
      name:
        type: string
        description: The unique name of the instance group.
      rootVolume:
        description: The root volume of the instance.
        $ref: '#/definitions/RootVolume'
  ProvisionK8sRequest:
    type: object
    description: Request object for workspace provision.
    properties:
      environmentName:
        type: string
        description: The environment for the workspace to create.
      instanceGroupss:
        type: array
        items:
          $ref: '#/definitions/InstanceGroup'
        description: The instance groups.
  CreateWorkspaceRequest:
    type: object
    description: Request object for the CreateWorkspace method.
    properties:
      disableTLS:
        type: boolean
        description: The boolean flag to disable TLS setup for workspace. By default the TLS is enabled.
      environmentName:
        type: string
        description: The environment for the workspace to create.
      mlVersion:
        type: string
        description: The version of ML workload app to install.
      provisionK8sRequest:
        description: The request for k8s workspace provision.
        $ref: '#/definitions/ProvisionK8sRequest'
      usePublicLoadBalancer:
        type: boolean
        description: The boolean flag to request public load balancer. By default private load balancer is used.
      workspaceName:
        type: string
        description: The name of the workspace to create.
  CreateWorkspaceResponse:
    type: object
    description: Request object for the CreateWorkspace method.
  ListWorkspacesRequest:
    type: object
    description: Request object for the ListWorkspaces method.
  ListWorkspacesResponse:
    type: object
    description: Request object for the ListWorkspaces method.
    properties:
      workspaces:
        type: array
        items:
          $ref: '#/definitions/Workspace'
        description: The list of workspaces.
  Workspace:
    type: object
    description: A ML workspace, which includes the cluster / storage.
    properties:
      environmentCrn:
        type: string
        description: CRN of the environment
      environmentName:
        type: string
        description: The name of the workspace's environment.
      instanceName:
        type: string
        description: The name of the workspace.
      instanceStatus:
        type: string
        description: The workspace's current status.
      instanceUrl:
        type: string
        description: URL of the workspace's user interface.
  UpgradeWorkspaceRequest:
    type: object
    description: Request object for the UpgradeWorkspace method.
    properties:
      environmentName:
        type: string
        description: The environment the workspace.
      mlVersion:
        type: string
        description: The version of workspace to upgrade to. where to find it (TBD)
      workspaceName:
        type: string
        description: The name of the workspace.
  UpgradeWorkspaceResponse:
    type: object
    description: Request object for the UpgradeWorkspace method.
  DeleteWorkspaceRequest:
    type: object
    description: Request object for the DeleteWorkspace method.
    properties:
      environmentName:
        type: string
        description: The environment for the workspace to delete.
      workspaceName:
        type: string
        description: The name of the workspace to delete.
  DeleteWorkspaceResponse:
    type: object
    description: Request object for the DeleteWorkspace method.
  GrantWorkspaceAccessRequest:
    type: object
    description: Request object for the GrantWorkspace method.
    properties:
      arn:
        type: string
        description: The aws user ARN to grant access to the corresponding EKS cluster.
      environmentName:
        type: string
        description: The environment that the workspace is a member of.
      workspaceName:
        type: string
        description: The name of the workspace to grant access to.
  GrantWorkspaceAccessResponse:
    type: object
    description: Request object for the DeleteWorkspace method.
    properties:
      kubeconfig:
        type: string
        description: The kubernetes config file
  RevokeWorkspaceAccessRequest:
    type: object
    description: Request object for the RevokeWorkspace method.
    properties:
      arn:
        type: string
        description: The aws user ARN to revoke access to the corresponding EKS cluster.
      environmentName:
        type: string
        description: The environment that the workspace is a member of.
      workspaceName:
        type: string
        description: The name of the workspace to revoke access to.
  RevokeWorkspaceAccessResponse:
    type: object
    description: Request object for the DeleteWorkspace method.
