<!-- master template for test_subreport -->
<report>
 <font name="body" size="16" typeface="Arial" />
 <font name="small" size="12" typeface="Arial" />
 <import path="math" />
 <layout pagesize="A6">
  <embedded name="loop">
   <parameter name="title" default="''" />
   <variable name="flip" calc="sum" expr="int(math.pow(-1, REPORT_COUNT))" />
   <style color="#000000" font="small" />
   <header>
    <field expr="title" align="right" stretch="true" >
     <box x="10" height="1" width="-1cm" />
    </field>
    <line pen="dash">
     <box x="5" y="5" height="0" width="-5" float="true" />
    </line>
   </header>
   <footer>
    <line pen="dash">
     <box x="5" y="5" height="0" width="-5"/>
    </line>
   </footer>
   <detail>
    <field stretch="true">
     <data>inner item</data>
     <box x="0" width="2cm" />
    </field>
    <field expr="item" stretch="true">
     <box x="2cm" width="2cm" />
    </field>
    <field expr="-flip" align="right" >
     <box x="4cm" width="2cm" />
    </field>
   </detail>
  </embedded>
  <style color="#000000" font="body" />
  <header>
   <line pen="1">
    <box x="5" y="5" width="-5"/>
   </line>
  </header>
  <footer>
   <box height="20" />
   <field expr="PAGE_NUMBER" align="right" format="%i /">
    <box x="0" width="2cm" />
   </field>
   <field expr="PAGE_NUMBER" evaltime="report" align="left">
    <box x="2cm" width="2cm" />
   </field>
  </footer>
  <detail>
   <subreport seq="-3" embedded="loop" data="sub"
    when="(REPORT_COUNT % 3) == 1" >
    <arg name="title" value="'Before every third'" />
   </subreport>
   <subreport seq="-2" template="subsub.prt" data="sub" inline="yes"
    when="REPORT_COUNT % 2" >
    <arg name="title" value="'Before even items'" />
   </subreport>
   <subreport seq="10" template="subsub.prt" data="sub"
    when="(REPORT_COUNT % 5) == 0" >
    <arg name="title" value="'After every fifth count'" />
   </subreport>
   <subreport seq="10" template="subsub.prt" data="sub"
    when="(REPORT_COUNT % 5) == 1" ownpageno="true" >
    <arg name="title" value="'After every fifth item'" />
   </subreport>
   <field stretch="true">
    <data>item</data>
    <box x="7" />
   </field>
   <field expr="item" stretch="true">
    <box x="50" />
   </field>
  </detail>
 </layout>
</report>
<!-- vim: set et ft=xml sw=1 : -->
