# Auto-generated by the Cortex Python SDK

FROM {{base_image}}

WORKDIR /job

{% if conda_requirements %}
RUN conda install --yes python=3.6
RUN conda config --add channels conda-forge
COPY conda_requirements.txt .
RUN conda install --yes --file conda_requirements.txt
{% endif %}

RUN pip install "cortex-python=={{cortex_sdk_version}}"

{% if requirements %}
COPY requirements.txt .
RUN pip install -r requirements.txt
{% endif %}

{% if deploy_archive %}
COPY action.tar .
RUN tar xf action.tar --strip 1
{% endif %}

COPY action.py .

ENTRYPOINT ["python", "action.py"]
